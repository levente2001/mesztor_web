<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>MESZ-TOR Kft. ‚Äì Kaputechnikai szak√ºzlet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="MESZ-TOR Kft. ‚Äì kaputechnikai term√©kek forgalmaz√°sa a kieg√©sz√≠t≈ëkt≈ël a komplett kivitelez√©sig. Gar√°zskapuk, ipari kapuk, kapumozgat√≥ motorok, automata √ºvegajt√≥k, soromp√≥k √©s szerviz Sz√©kesfeh√©rv√°ron." />

  <!-- Google Font (nem k√∂telez≈ë, csak szebb) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --color-bg: #f5f7fb;
      --color-surface: #ffffff;
      --color-primary: #D96C06;
      --color-primary-soft: #e0efff;
      --color-accent: #d8a600;
      --color-text: #33291f;
      --color-muted: #6b7280;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 40px rgba(42, 25, 15, 0.08);
      --container-width: 1280px;
    }

    * {
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #EEEEEE;
      color: var(--color-text);
      line-height: 1.6;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .container {
      width: 100%;
      max-width: var(--container-width);
      margin: 0 auto;
      padding: 0 2rem;
    }

    /* Topbar */

    .topbar {
      background: #222222;
      color: #e5e7eb;
      font-size: 0.85rem;
    }

    .topbar-inner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      padding: 0.4rem 1.5rem;
    }

    .topbar-left,
    .topbar-right {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      align-items: center;
    }

    .topbar-item {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      white-space: nowrap;
    }

    .topbar-item span.icon {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .topbar-cta {
      background: var(--color-accent);
      color: #ffffff;
      padding: 0.3rem 0.9rem;
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.8rem;
    }

    /* Header / Nav */

    .site-header {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(16px);
      background: linear-gradient(to right, rgba(248, 250, 252, 0.9), rgba(241, 245, 249, 0.9));
      border-bottom: 1px solid rgba(42, 29, 15, 0.04);
    }

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      padding: 0.8rem 1.5rem;
      position: relative; 
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .brand-logo {
      width: 80px;
      height: 56px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ffffff;
      font-weight: 800;
      font-size: 1.1rem;
    }

    .brand-img {
      height: 56px;
      width: 80px;
    }

    .brand-text-main {
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      font-size: 0.95rem;
    }

    .brand-text-sub {
      font-size: 0.75rem;
      color: var(--color-muted);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      font-size: 0.93rem;
    }

    .nav-links a {
      position: relative;
      padding-bottom: 0.2rem;
      color: #0f172a;
      font-weight: 500;
    }

    .nav-links a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
      transition: width 0.22s ease;
    }

    /* A dropdownos men√ºpont legyen rugalmas sorban elrendezve */
    .nav-item.has-dropdown > a {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      position: relative;
    }

    /* A NY√çL ‚Äì itt fel√ºl√≠rjuk a glob√°lis ::before-t is */
    .nav-item.has-dropdown > a::before {
      content: "‚ñæ";
      position: static;   /* ne absolute legyen */
      top: auto;
      left: auto;
      background: none;
      font-size: 0.75rem;
      transform: translateY(1px);
      margin-left: 0.1rem;
    }


    .nav-links a:hover::after {
      width: 100%;
    }

    .nav-cta {
      border-radius: 999px;
      padding: 0.45rem 1.2rem;
      border: none;
      background: #D96C06;
      color: #ffffff;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(200, 138, 4, 0.35);
    }

    .nav-cta:hover {
      filter: brightness(1.05);
    }

    .nav-toggle {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
    }

    .nav-toggle span {
      display: block;
      width: 22px;
      height: 2px;
      background: #2a1f0f;
      margin: 4px 0;
      border-radius: 999px;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    /* --- Fels≈ë men√º: layout-board alap√∫ dropdown-ok --- */
    .main-nav {
      position: static; /* m√°r NEM ehhez igaz√≠tjuk a dropdown-t */
    }

    .nav-item {
      position: static;         /* √≠gy a legk√∂zelebbi pozicion√°lt ≈ës a header-inner lesz */
      display: flex;
      align-items: center;
    }

    /* maradhat, de √≠gy m√°r csak meger≈ës√≠t√©s */
    .nav-item.has-dropdown {
      position: static;
    }



    .nav-item + .nav-item {
      margin-left: 0.75rem;
    }

    .nav-item > a {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

        /* --- Mega dropdown a fels≈ë men√ºh√∂z --- */
    /* --- Mega dropdown a fels≈ë men√ºh√∂z --- */
.nav-dropdown {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: min(980px, calc(100vw - 3rem)); /* sz√©p, k√∂z√©pre h√∫zott doboz, mindk√©t oldalt kb. 1.5rem marg√≥ */
  padding: 1.6rem 2rem;
  border-radius: 0px 0px 10px 10px;
  background: #fff;
  display: none;
  z-index: 60;
}

/* R√°csos elrendez√©s */
.nav-item.has-dropdown.dropdown-open .nav-dropdown {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 0.9rem 1.8rem;
}


/* ne rajzolja r√° a f≈ë men√ºpont al√°h√∫z√°s√°t a dropdown linkekre */
.nav-dropdown a::after {
  display: none;
}

/* K√°rty√°s dropdown elemek */
.nav-dropdown .nav-dd-item {
  font-size: 0.9rem;
  font-weight: 500;
  padding: 0.65rem 0.75rem;
  color: #0f172a;
  white-space: normal;
  display: flex;
  align-items: flex-start;
  gap: 0.7rem;
  border-radius: 0.9rem;
  text-decoration: none;
  background: transparent;
  transition: background 0.15s ease, transform 0.15s ease, box-shadow 0.15s ease;
}

.nav-dropdown .nav-dd-item:hover {
  background: #f8fafc;
  box-shadow: 0 8px 24px rgba(15, 23, 42, 0.06);
  transform: translateY(-1px);
  color: #0f172a;
}

.nav-dd-icon {
  flex: 0 0 2.4rem;
  width: 2.4rem;
  height: 2.4rem;
  border-radius: 999px;
  background: #f1f5f9;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
}

.nav-dd-main {
  display: flex;
  flex-direction: column;
  gap: 0.15rem;
}

.nav-dd-title {
  font-size: 0.9rem;
  font-weight: 600;
}

.nav-dd-sub {
  font-size: 0.8rem;
  color: var(--color-muted);
}


    /* Hero */

    .hero {
      padding: 1.5rem 0 3.75rem;
    }

    .hero-inner {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 3rem;
      align-items: center;
    }

    .hero-kicker {
      font-size: 0.8rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--color-primary);
      font-weight: 700;
      padding: 0.2rem 0.8rem;
      border-radius: 999px;
      background: var(--color-primary-soft);
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      margin-bottom: 0.75rem;
    }

    .hero-kicker-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--color-primary);
    }

    .hero-title {
      font-size: clamp(2.2rem, 3vw, 2.8rem);
      line-height: 1.12;
      margin-bottom: 0.75rem;
    }

    .hero-title span.highlight {
      color: var(--color-primary);
    }

    .hero-lead {
      font-size: 1rem;
      color: var(--color-muted);
      max-width: 34rem;
      margin-bottom: 1.6rem;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.9rem;
      align-items: center;
      margin-bottom: 1.8rem;
    }

    .btn-primary {
      border-radius: 10px;
      border: none;
      cursor: pointer;
      padding: 0.85rem 1.6rem;
      font-weight: 600;
      font-size: 0.95rem;
      background: #222222;
      color: #ffffff;
    }

    .btn-primary:hover {
      filter: brightness(1.06);
    }

    .btn-ghost {
      border-radius: 10px;
      border: none;
      padding: 0.8rem 1.5rem;
      background: rgba(255, 255, 255, 0.7);
      font-weight: 500;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      box-shadow: 0 4px 10px rgba(98, 98, 98, 0.2);
      gap: 0.5rem;
      cursor: pointer;
    }

    .btn-ghost span.icon {
      font-size: 1.05rem;
    }

    .hero-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      font-size: 0.8rem;
      color: var(--color-muted);
    }

    .hero-meta span strong {
      display: block;
      font-size: 0.95rem;
      color: #111827;
    }

    .hero-visual {
      position: relative;
    }

    .hero-card {
      border-radius: 26px;
      padding: 1rem;
      position: relative;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1;
      overflow: hidden;
    }

  /* a k√©p visszaforgatva, hogy egyenesen √°lljon */
  .hero-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 20px;
    display: block;
    transform-origin: center center;
  }



    .hero-card-badge {
      font-size: 0.75rem;
      color: var(--color-muted);
      margin-bottom: 0.6rem;
    }

    .hero-card-main {
      font-weight: 600;
      margin-bottom: 0.8rem;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.6rem;
    }

    .hero-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 0.8rem;
    }

    .pill {
      font-size: 0.75rem;
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      background: var(--color-primary-soft);
      color: var(--color-primary);
      font-weight: 500;
      white-space: nowrap;
    }


    /* Contact */


    .hero-stats {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.75rem;
      font-size: 0.9rem;
    }

    .hero-stat-label {
      font-size: 0.75rem;
      color: var(--color-muted);
    }

    .hero-stat-value {
      font-weight: 600;
    }

    .hero-glow {
      position: absolute;
      inset: -0%;
      background: radial-gradient(circle at 10% 10%, rgba(4, 102, 200, 0.15), transparent 0%),
                  radial-gradient(circle at 100% 100%, rgba(0, 180, 216, 0.18), transparent 0%);
      opacity: 0.9;
      border-radius: 20px;
      z-index: 0;
    }

    /* Sections generic */

    section {
      padding: 3rem 0;
    }

    .section-header {
      max-width: 42rem;
      margin-bottom: 2rem;
    }

    .section-kicker {
      font-size: 0.78rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--color-primary);
      font-weight: 700;
      margin-bottom: 0.35rem;
    }

    .section-title {
      font-size: 1.6rem;
      margin: 0 0 0.35rem;
    }

    .section-lead {
      font-size: 0.95rem;
      color: var(--color-muted);
      margin: 0;
    }

    /* Product grid */

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 1.4rem;
    }

    .card {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      padding: 1.25rem 1.3rem;
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }

    .card-tag {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--color-muted);
    }

    .card-title {
      font-size: 1.02rem;
      font-weight: 600;
    }

    .card-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.4rem;
      font-size: 0.83rem;
    }

    .chip-link {
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: #f3f4f6;
      color: #111827;
      border: 1px solid rgba(15, 23, 42, 0.04);
    }

    .chip-link:hover {
      background: #e5e7eb;
    }

    .card-footer-link {
      margin-top: 0.4rem;
      font-size: 0.82rem;
      color: var(--color-primary);
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    /* Partners strip */

    .partners-strip {
      border-radius: 10px;
      padding: 1.25rem 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
    }

    .partners-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
    }

    .partner-pill {
      padding: 0.45rem 0.9rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 0.85rem;
      font-weight: 500;
      white-space: nowrap;
    }

    /* Services / Why us */

    .icon-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.2rem;
    }

    .icon-card {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      padding: 1.1rem 1.2rem;
    }

    /* Services admin UI */
    .icon-card { position: relative; }

    .svc-admin-actions{
      position:absolute;
      top:12px;
      right:12px;
      display:flex;
      gap:6px;
    }

    .svc-admin-btn{
      width:32px;
      height:32px;
      border-radius:999px;
      border:1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.92);
      cursor:pointer;
      font-size:16px;
    }

    .svc-admin-btn:hover{
      background:#fff;
      box-shadow: 0 10px 24px rgba(15,23,42,.10);
    }

    .icon-card-add{
      border:2px dashed rgba(148,163,184,.85);
      background: rgba(248,250,252,.75);
      cursor:pointer;
    }

    .icon-badge-add{
      display:flex;
      align-items:center;
      justify-content:center;
      background: transparent;
      border:2px dashed rgba(148,163,184,.85);
      font-size:28px;
      line-height:1;
    }


    .icon-badge {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: var(--color-primary-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      color: var(--color-primary);
      margin-bottom: 0.5rem;
    }

    .icon-card-title {
      font-size: 0.98rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .icon-card-body {
      font-size: 0.9rem;
      color: var(--color-muted);
    }

    /* Motto & references */

    .motto-block {
      background: #2a1c0f;
      color: #e5e7eb;
      border-radius: 26px;
      padding: 2.1rem 2rem;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .motto-block::before {
      content: "‚Äû";
      position: absolute;
      top: -1.2rem;
      left: 1.1rem;
      font-size: 5rem;
      color: rgba(148, 163, 184, 0.2);
    }

    .motto-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.6rem;
    }

    .motto-text {
      font-size: 0.95rem;
      margin-bottom: 1rem;
    }

    .refs-cta {
      margin-top: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .refs-cta-text {
      font-size: 0.95rem;
      color: var(--color-muted);
    }

        .references-grid {
      margin-top: 1.8rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 1.25rem;
    }

    .reference-card {
      background: #ffffff;
      border-radius: 0.9rem;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.08);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .contact-map-frame {
      padding: 0;
    }

    .reference-image-wrap {
      position: relative;
      padding-top: 62%;
      background: #e2e8f0;
      overflow: hidden;
    }

    .reference-image-wrap img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.25s ease-out;
    }

    .reference-card:hover .reference-image-wrap img {
      transform: scale(1.03);
    }

    .reference-info {
      padding: 0.8rem 0.95rem 0.9rem;
      font-size: 0.9rem;
    }

    .reference-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .reference-desc {
      font-size: 0.85rem;
      color: var(--color-muted);
    }

    .references-empty {
      margin-top: 1.2rem;
      font-size: 0.9rem;
      color: var(--color-muted);
    }

    /* From Uiverse.io by Smit-Prajapati */ 
.orange {
  color: #ff7a01;
}

.form-container {
  max-width: 100%;
  background-color: #001925;
  padding: 30px;
  border-radius: 24px 0px 0px 24px;
  border-right: 5px solid #ff7a01;
}

.heading {
  display: block;
  color: white;
  font-size: 1.5rem;
  font-weight: 800;
  margin-bottom: 20px;
}

.form-container .form .input {
  color: #87a4b6;
  width: 100%;
  background-color: #002733;
  border: none;
  outline: none;
  padding: 10px;
  margin-bottom: 20px;
  font-weight: bold;
  transition: all 0.2s ease-in-out;
  border-left: 1px solid transparent;
}

.form-container .form .input:focus {
  border-left: 5px solid #ff7a01;
}

.form-container .form .textarea {
  width: 100%;
  padding: 10px;
  border: none;
  outline: none;
  background-color: #002733;
  color: #ff7a01;
  font-weight: bold;
  resize: none;
  max-height: 150px;
  margin-bottom: 20px;
  border-left: 1px solid transparent;
  transition: all 0.2s ease-in-out;
}

.form-container .form .textarea:focus {
  border-left: 5px solid #ff7a01;
}

.form-container .form .button-container {
  display: flex;
  gap: 10px;
}

.form-container .form .button-container .send-button {
  flex-basis: 100%;
  background: #ff7a01;
  padding: 10px;
  color: #001925;
  text-align: center;
  font-weight: bold;
  border: 1px solid transparent;
  clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
  transition: all 0.2s ease-in-out;
}

.form-container .form .button-container .send-button:hover {
  background: transparent;
  border: 1px solid #ff7a01;
  color: #ff7a01;
}

.form-container .form .button-container .reset-button-container {
  filter: drop-shadow(1px 1px 0px #ff7a01);
  flex-basis: 30%;
}

.form-container .form .button-container .reset-button-container .reset-button {
  position: relative;
  text-align: center;
  padding: 10px;
  color: #ff7a01;
  font-weight: bold;
  background: #001925;
  clip-path: polygon(0 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%);
  transition: all 0.2s ease-in-out;
}

.form-container .form .button-container .reset-button-container .reset-button:hover {
  background: #ff7a01;
  color: #001925;
}

    /* Contact */

    .contact-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 0rem;
    }

    .contact-card {
      background: var(--color-surface);
      border-radius: 0px 24px 24px 0px;
      padding: 1.7rem 1.7rem;
    }

    .contact-card-map {
      background: rgba(0, 180, 216, 0);
      border-radius: 24px;
      margin-top: 25px;
      padding: 0rem 0rem;
    }

    .contact-item {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin-bottom: 0.8rem;
      font-size: 0.95rem;
    }

    .contact-label {
      font-weight: 600;
      font-size: 0.9rem;
      color: #111827;
    }

    .contact-icon {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: var(--color-primary-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      color: #0d6efd;
      flex-shrink: 0;
      margin-top: 0.1rem;
    }

    .contact-highlight {
      font-size: 0.9rem;
      color: var(--color-muted);
      margin-top: 0.3rem;
    }

    /* Footer */

    footer {
      border-top: 1px solid rgba(148, 163, 184, 0.25);
      background: #0f172a;
      color: #9ca3af;
      padding: 1.5rem 0 2rem;
      font-size: 0.82rem;
      margin-top: 2rem;
    }

    .footer-inner {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 1rem;
      align-items: center;
    }

    /* --------- Term√©kv√°laszt√©k ‚Äì term√©k k√°rty√°k --------- */

.product-grid-card {
  background: #fff;
  border-radius: 1.1rem;
  padding: 1.1rem;
  display: flex;
  flex-direction: column;
  gap: 0.7rem;
  cursor: pointer;
  transition: transform 0.18s ease-out, box-shadow 0.18s ease-out, border-color 0.18s ease-out;
}

.product-grid-card:hover {
  transform: translateY(-2px);
  border-color: rgba(59, 130, 246, 0.7);
  box-shadow: 0 12px 30px rgba(95, 95, 97, 0.75);
}

.product-grid-card-image {
  position: relative;
  padding-top: 62%;
  border-radius: 0.9rem;
  overflow: hidden;
  background: #020617;
  border: 1px solid rgba(15, 23, 42, 0.9);
}

.product-grid-card-image img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.product-grid-card-title {
  font-weight: 600;
  font-size: 1rem;
}

.product-grid-card-desc {
  font-size: 0.9rem;
  color: var(--muted);
}

.product-grid-card .btn-primary {
  margin-top: 0.25rem;
  align-self: flex-start;
  font-size: 0.85rem;
  padding-inline: 0.9rem;
}


        /* Referencia k√©p nagy n√©zet (modal) ‚Äì csak desktopon haszn√°ljuk */
    .reference-modal-backdrop {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(15, 23, 42, 0.75);
      z-index: 1000;
      padding: 1.5rem;
    }

    .reference-modal-backdrop.open {
      display: flex;
    }

    .reference-modal {
      position: relative;
      max-width: min(900px, 90vw);
      max-height: min(80vh, 600px);
      border-radius: 1rem;
      overflow: hidden;
      background: #020617;
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.6);
    }

    .reference-modal img {
      display: block;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      background: #000;
    }

    .reference-modal-close {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      border: none;
      border-radius: 999px;
      width: 32px;
      height: 32px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: rgba(15, 23, 42, 0.7);
      color: #e5e7eb;
      font-size: 1rem;
    }

    .reference-modal-close:hover {
      background: rgba(15, 23, 42, 0.9);
    }

    .reference-modal-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 42px;
      height: 42px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.75);
      border: 1px solid rgba(148, 163, 184, 0.65);
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      cursor: pointer;
      backdrop-filter: blur(8px);
      user-select: none;
    }

    .reference-modal-nav:hover {
      background: rgba(30, 64, 175, 0.9);
    }

    .reference-modal-prev {
      left: 12px;
    }

    .reference-modal-next {
      right: 12px;
    }

    .reference-modal-meta {
      position: absolute;
      left: 12px;
      right: 12px;
      bottom: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 0.55rem 0.7rem;
      border-radius: 0.85rem;
      background: linear-gradient(to top, rgba(2, 6, 23, 0.78), rgba(2, 6, 23, 0.22));
      color: #e5e7eb;
      font-size: 0.9rem;
      pointer-events: none; /* csak inform√°ci√≥, ne fogja meg a kattint√°st */
    }

    .reference-modal-title {
      font-weight: 600;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .reference-modal-counter {
      opacity: 0.85;
      font-variant-numeric: tabular-nums;
      white-space: nowrap;
    }

    /* ------------ F≈ëoldali hero slider ------------ */

.hero-slider {
  padding: 0rem 0 0rem;
}

.hero-slider-inner {
  max-width: 100%;
  padding: 0rem 0 2.8rem;
  margin-inline: auto;
}

.hero-slider-viewport {
  position: relative;
  border-radius: 1rem;
  overflow: hidden;
  background: radial-gradient(circle at top, #0f172a 0, #020617 55%);
}

.hero-slider-track {
  display: flex;
  transition: transform 0.55s ease;
}

.hero-slide {
  position: relative;
  min-width: 100%;
  height: min(420px, 65vh);
  background: #020617;
}

.hero-slide img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  filter: saturate(1.05);
}

.hero-slide-overlay {
  position: absolute;
  inset: auto 0 0;
  padding: 1.4rem 1.6rem 1.5rem;
  background: linear-gradient(to top, #222, rgba(15, 23, 42, 0.4), transparent);
  color: #e5e7eb;
}

.hero-slide-title {
  font-size: clamp(1.2rem, 2vw + .4rem, 1.7rem);
  font-weight: 600;
  letter-spacing: -0.03em;
  margin-bottom: .2rem;
}

.hero-slide-subtitle {
  font-size: .9rem;
  color: #cbd5f5;
}

.hero-slider-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 38px;
  height: 38px;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.75);
  border: 1px solid rgba(148, 163, 184, 0.7);
  color: #e5e7eb;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  cursor: pointer;
  backdrop-filter: blur(8px);
}

.hero-slider-nav:hover {
  background: rgba(30, 64, 175, 0.9);
}

.hero-slider-nav-prev {
  left: 14px;
}

.hero-slider-nav-next {
  right: 14px;
}

.hero-slider-dots {
  position: absolute;
  bottom: 12px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  gap: 6px;
  padding-bottom: 2px;
}

.hero-slider-dot {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.7);
  background: rgba(15, 23, 42, 0.7);
  cursor: pointer;
  padding: 0;
}

.hero-slider-dot.is-active {
  background: #f97316;
  border-color: #fed7aa;
}

@media (max-width: 700px) {

  .form-container {
    max-width: 100%;
    background-color: #001925;
    padding: 30px;
    border-radius: 24px 24px 0px 0px;
    border-bottom: 5px solid #ff7a01;
    border-right: none;
  }

  .contact-card {
      background: var(--color-surface);
      border-radius: 0px 0px 24px 24px;
      padding: 1.7rem 1.7rem;
  }

  .contact-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 0rem;
    }

  .hero-slider {
    padding-top: 1.8rem;
  }

  .hero-slider-viewport {
    border-radius: 1.1rem;
  }

  .hero-slide {
    height: min(320px, 60vh);
  }

  .hero-slide-overlay {
    padding-inline: 1.1rem;
    padding-bottom: 1.1rem;
  }
}


    /* Mobilon akkor se l√°tsz√≥djon, ha v√©letlen√ºl megnyitn√°nk */
    @media (max-width: 800px) {
      .reference-modal-backdrop {
        display: none !important;
      }
    }

    /* Desktopon legyen "zoom-in" kurzor a referencia k√©peken */
    @media (min-width: 801px) {
      .reference-image-wrap img {
        cursor: zoom-in;
      }
    }


    .footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .footer-links a {
      color: #d1d5db;
    }

    /* Responsive */

    @media (max-width: 960px) {
      .hero-inner {
        grid-template-columns: minmax(0, 1fr);
      }
      .hero {
        padding-top: 2.4rem;
      }
      .contact-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

@media (max-width: 800px) {
  /* ne lehessen oldalra scrollozni */
  html,
  body {
    max-width: 100%;
    overflow-x: hidden;
  }

  .topbar-inner {
    display: none;
  }

  .header-inner {
    padding: 0.7rem 1.2rem;
  }

      .nav-links {
        position: fixed;
        top: 60px;          /* a header al√≥l induljon */
        left: 0;
        right: 0;
        bottom: 0;          /* a k√©perny≈ë alj√°ig tartson */
        background: rgba(248, 250, 252, 0.98);
        border-bottom: 1px solid rgba(15, 23, 42, 0.06);
        padding: 0.75rem 1.25rem 1.25rem;

        display: flex;
        flex-direction: column;
        align-items: flex-start;

        transform: translateY(-100%);  /* alapb√≥l ‚Äûfelh√∫zva‚Äù */
        opacity: 0;
        pointer-events: none;
        transition: transform 0.2s ease, opacity 0.2s ease;

        overflow-y: auto;              /* BEL√úL g√∂rgethet≈ë */
        -webkit-overflow-scrolling: touch;
        z-index: 999;                  /* mindent takarjon */
      }


  .nav-links.open {
    transform: translateY(0);
    opacity: 1;
    height: 50vh;
    pointer-events: auto;
  }

  .nav-toggle {
    display: block;
  }

  .nav-cta {
    width: 100%;
    justify-content: center;
    text-align: center;
  }

  /* a f≈ë men√ºpontok egym√°s alatt, teljes sz√©less√©gen */
  .nav-item {
    width: 100%;
    flex-direction: column;
    align-items: flex-start;
    margin-left: 0;
  }

  .nav-links a {
    font-size: 0.9rem;   /* kicsit kisebb bet≈± */
  }

  .nav-item > a {
    padding: 0.4rem 0;
  }

  /* ne legyen k√ºl√∂n ny√≠l ut√°na mobilon */
  .nav-item.has-dropdown > a::after {
    content: "";
  }

  .contactemail {
    font-size: 0.85rem;
  }

  /* mega-men√º helyett sima, f√ºgg≈ëleges lista mobilon */
  .nav-dropdown {
    position: static;
    top: auto;
    left: auto;
    transform: none;
    width: 100%;
    max-width: none;
    margin-top: 0.15rem;
    box-shadow: none;
    background: transparent;
    padding: 0.1rem 0 0.6rem 0.5rem;  /* kis beh√∫z√°s balra */
    display: block;
  }

  /* fel√ºl√≠rjuk a desktop-grid display-t */
  .nav-item.has-dropdown.dropdown-open .nav-dropdown {
    display: block;
  }

  /* k√°rty√°s, de egym√°s alatti, NEM sz√©lesebb a k√©perny≈ën√©l */
  .nav-dropdown .nav-dd-item {
    width: 100%;
    margin: 0;
    padding: 0.45rem 0.25rem 0.45rem 0;
    border-radius: 0.7rem;
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    text-decoration: none;
    background: transparent;
  }

  .nav-dropdown .nav-dd-item:hover {
    background: rgba(15, 23, 42, 0.04);
    box-shadow: none;
    transform: none;
  }

  /* ikon + sz√∂veg mobilra optimaliz√°lva */
  .nav-dd-icon {
    width: 1.8rem;
    height: 1.8rem;
    font-size: 1rem;
  }

  .nav-dd-title {
    font-size: 0.85rem;
  }

  .nav-dd-sub {
    font-size: 0.76rem;
  }
}



    @media (max-width: 600px) {
      section {
        padding: 2.3rem 0;
      }

      .motto-block {
        padding: 1.7rem 1.6rem;
      }

      .hero-actions {
        flex-direction: column;
        align-items: stretch;
      }

      .btn-primary,
      .btn-ghost {
        width: 100%;
        justify-content: center;
      }
    }

      /* Top besz√°ll√≠t√≥ partnerek */

    .top-partners-section {
      margin-top: 2.25rem;
    }

    .partners-strip {
      background: #fcf5ed;
      border-radius: 20px;
      border-radius: var(--radius-lg);
      padding: 1.8rem 1.9rem;
    }

    .partners-inner {
      display: flex;
      flex-direction: column;
      gap: 1.4rem;
    }

    .partners-heading-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: #0f172a;
    }

    .partners-heading-lead {
      margin-top: 0.25rem;
      font-size: 0.9rem;
      color: var(--color-muted);
      max-width: 40rem;
    }

    .partners-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1.3rem;
      align-items: stretch;
    }

    .partner-card {
      border-radius: 1rem;
      padding: 1rem 1rem 1.1rem;
      background: #fcf5ed;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 0.55rem;
    }

    .partner-logo {
      width: 130px;
      height:110px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .partner-logo img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      display: block;
    }

    .partner-logo-placeholder {
      width: 64px;
      height: 64px;
      border-radius: 999px;
      border: 1px dashed #cbd5e1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      font-weight: 600;
      color: #64748b;
      background: #f8fafc;
    }

    .partner-name {
      font-size: 0.9rem;
      font-weight: 600;
      color: #0f172a;
    }

    .partner-subtitle {
      font-size: 0.8rem;
      color: var(--color-muted);
    }

    .partners-empty {
      margin-top: 0.6rem;
      font-size: 0.85rem;
      color: var(--color-muted);
      text-align: center;
    }

    @media (max-width: 640px) {
      .partners-strip {
        padding: 1.3rem 1.2rem;
      }

      .partners-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
    }

  </style>
</head>
<body>

  <!-- Topbar -->
  <div class="topbar">
    <div class="topbar-inner container">
      <div class="topbar-left">
        <div class="topbar-item">
          <span class="icon">üìû</span>
          <span data-section="site" class="mobileinvisible" data-field="topbarPhones">
            06-22-331-332 ¬∑ 06-20-977-09-07
          </span>
        </div>
        <div class="topbar-item">
          <span class="icon">‚úâÔ∏è</span>
          <span data-section="site" class="mobileinvisible" data-field="topbarEmail">
            mesztorkaputechnika1@gmail.com
          </span>
        </div>
        <div class="topbar-item">
          <a
            href="https://www.facebook.com/mesztorkaputechnika" 
            target="_blank"
            rel="noopener"
            aria-label="Mesz-Tor Facebook oldal"
            style="display:flex;align-items:center;justify-content: center;text-decoration:none;color:inherit;"
          >
            <span class="icon" aria-hidden="true" style="display:flex;align-items:center;justify-content: center;">
              <!-- egyszer≈± FB log√≥ SVG -->
              <svg width="20" height="20" viewBox="0 0 24 24">
                <path
                  fill="currentColor"
                  d="M22 12.07C22 6.51 17.52 2 12 2S2 6.51 2 12.07C2 17.1 5.66 21.29 10.44 22v-7.03H8.08v-2.9h2.36V9.41c0-2.33 1.38-3.62 3.5-3.62.99 0 2.03.18 2.03.18v2.26h-1.14c-1.12 0-1.47.7-1.47 1.42v1.7h2.5l-.4 2.9h-2.1V22C18.34 21.29 22 17.1 22 12.07Z"
                />
              </svg>
            </span>
            <span class="mobileinvisible" data-section="site" data-field="topbarFacebook" style="margin-left: 5px">/mesztorkaputechnika</span>
          </a>
        </div>
      </div>
      <div class="topbar-right">
        <div class="topbar-item">
          <span class="icon">üìç</span>
          <span class="mobileinvisible" data-section="site" data-field="topbarAddress">
            Sz√©kesfeh√©rv√°r, Ber√©nyi √∫t 81.
          </span>
        </div>
      </div>
    </div>
  </div>


  <!-- Header / Nav -->
  <header class="site-header">
    <div class="header-inner container">
      <div class="brand">
        <div class="brand-logo">
          <a href="#">
            <img src="mesztor-effect.png" class="brand-img" alt="">
          </a>
        </div>
        <div>
          <div class="brand-text-main"
              data-section="site" data-field="brandMain">
            MESZ-TOR Kft.
          </div>
          <div class="brand-text-sub"
              data-section="site" data-field="brandSub">
            Kaputechnikai szak√ºzlet √©s kivitelez√©s
          </div>
        </div>
      </div>

      <button class="nav-toggle" aria-label="Men√º megnyit√°sa">
        <span></span><span></span><span></span>
      </button>

      <nav class="main-nav">
        <div class="nav-links">

          <!-- Term√©kv√°laszt√©k ‚Äì dropdown -->
          <div class="nav-item has-dropdown">
            <a
              href="#hero"
            >
              Kezd≈ëlap
            </a>

            <div class="nav-dropdown">
              <a
                href="#why-us"
                class="nav-dd-item"
              >
                <span class="nav-dd-icon">üë®üèª‚Äçüîß</span>
                <span class="nav-dd-main">
                  <span class="nav-dd-title">Mi√©rt mi?</span>
                  <span class="nav-dd-sub">Min≈ës√©g, szak√©rtelem, hossz√∫ t√°v√∫ biztons√°g</span>
                </span>
              </a>
              <a
                href="#services"
                class="nav-dd-item"
              >
                <span class="nav-dd-icon">üß∞</span>
                <span class="nav-dd-main">
                  <span class="nav-dd-title">Szolg√°ltat√°saink</span>
                  <span class="nav-dd-sub">Felm√©r√©s, tan√°csad√°s, szerviz</span>
                </span>
              </a>
              <a
                href="#products"
                class="nav-dd-item"
              >
                <span class="nav-dd-icon">üö™</span>
                <span class="nav-dd-main">
                  <span class="nav-dd-title">Term√©kv√°laszt√©k</span>
                  <span class="nav-dd-sub">Gar√°zs-, ipari kapuk, soromp√≥k, automatika</span>
                </span>
              </a>

              
              
            </div>
          </div>



          <!-- Kapcsolat -->
          <div class="nav-item">
            <a
              href="#contact"
              data-section="site"
              data-field="navContact"
              data-section-key="contact"
            >
              Kapcsolat
            </a>
          </div>

          <!-- Szolg√°ltat√°sok ‚Äì dropdown -->
          <div class="nav-item has-dropdown">
            <a
              href="#services"
            >
              Referenci√°k
            </a>

            <div class="nav-dropdown">
              <a
                href="#references"
                class="nav-dd-item"
              >
                <span class="nav-dd-icon">üì∏</span>
                <span class="nav-dd-main">
                  <span class="nav-dd-title">Referenci√°k</span>
                  <span class="nav-dd-sub">Elk√©sz√ºlt gar√°zs- √©s ipari kapuink, fot√≥kkal.</span>
                </span>
              </a>
              <a
                href="#top-partners"
                class="nav-dd-item"
              >
                <span class="nav-dd-icon">üè¢</span>
                <span class="nav-dd-main">
                  <span class="nav-dd-title">Top besz√°ll√≠t√≥k</span>
                  <span class="nav-dd-sub">M√°rk√°k, akikkel egy√ºtt dolgozunk</span>
                </span>
              </a>
            </div>
          </div>


          <!-- CTA ‚Äì ugyan√∫gy a Kapcsolat szekci√≥ra mutat, de m√°r a k√∂z√∂s nav-logik√°val -->
          <button
            class="nav-cta"
            type="button"
            onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'});"
            data-section="site"
            data-field="navCtaText"
            data-section-key="contact"
          >
            Aj√°nlatk√©r√©s
          </button>
        </div>
      </nav>



    </div>
  </header>

  <main>

    <!-- F≈ëoldali automatikus slider -->
    <section id="hero-slider" class="hero-slider">
      
    </section>

    <!-- Hero -->
    <section id="hero" class="hero">
      <div class="container">
        <div class="hero-slider-inner">
          <div class="hero-kicker">
              <span class="hero-kicker-dot"></span>
              <span data-section="hero" data-field="kicker">
                Csal√≥d√°smentes kaputechnika
              </span>
            </div>
          <div class="hero-slider-viewport">
            <div id="heroSliderTrack" class="hero-slider-track">
              <!-- Diak√©pek JS-b≈ël -->
            </div>

            <button id="heroSliderPrev" class="hero-slider-nav hero-slider-nav-prev" type="button" aria-label="El≈ëz≈ë k√©p">
              ‚Äπ
            </button>
            <button id="heroSliderNext" class="hero-slider-nav hero-slider-nav-next" type="button" aria-label="K√∂vetkez≈ë k√©p">
              ‚Ä∫
            </button>

            <div id="heroSliderDots" class="hero-slider-dots"></div>
          </div>
        </div>
        
      </div>
      

      <div class="container hero-inner">
        <div>
          
          <h1 class="hero-title"
              data-section="hero" data-field="title">
            √údv√∂z√∂lj√ºk a <span class="highlight">kaputechnikai term√©kek</span> vil√°g√°ban.
          </h1>
          <p class="hero-lead"
            data-section="hero" data-field="lead">
            F≈ë profilunk a kaputechnikai term√©kek forgalmaz√°sa a kieg√©sz√≠t≈ëkt≈ël a komplett kivitelez√©sig.
            Stabil term√©keket √©s prec√≠z szolg√°ltat√°st ny√∫jtunk megl√©v≈ë √©s leend≈ë √ºgyfeleink r√©sz√©re.
          </p>
          <div class="hero-actions">
            <button class="btn-primary"
                    onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'});"
                    data-section="hero" data-field="primaryCta">
              K√©rek szem√©lyre szabott aj√°nlatot
            </button>
            <button class="btn-ghost"
                    onclick="document.getElementById('products').scrollIntoView({behavior:'smooth'});"
                    data-section="hero" data-field="secondaryCta">
              <span class="icon">‚¨áÔ∏è</span>
              Term√©kv√°laszt√©k megtekint√©se
            </button>
          </div>

        </div>

        <div class="hero-visual">
          <div class="hero-glow"></div>
          
          <div class="hero-card">

            <img id="hero-image" src="IMG-9242.jpg" alt="Mesztor-image">
            
          </div>
        </div>

      
    </section>

    <!-- Products -->
    <section id="products">
      <div class="container">
        <div class="section-header">
          <div class="section-kicker" data-section="products" data-field="products_kicker">Term√©kv√°laszt√©k</div>
          <h2 class="section-title" data-section="products" data-field="products_title">Kaputechnikai megold√°sok egy helyen</h2>
          <p class="section-lead" data-section="products" data-field="products_lead">
            Lakoss√°gi gar√°zskapukt√≥l az ipari gyorskapukig, kapumozgat√≥ motorokt√≥l az automata √ºvegajt√≥kig ‚Äì
            seg√≠t√ºnk megtal√°lni az adott helyre legide√°lisabb megold√°st.
          </p>
        </div>

        <!--<div class="card-grid">
          <article class="card">
            <div class="card-tag" data-section="products" data-field="lakossagi_top">Lakoss√°gi megold√°sok</div>
            <div class="card-title" data-section="products" data-field="lakossagi_title">Gar√°zskapuk</div>
            <p class="icon-card-body" data-section="products" data-field="lakossagi_text">
              Eszt√©tikus √©s biztons√°gos gar√°zskapuk a mindennapi haszn√°lathoz.
            </p>
            <div class="card-links">
              <span class="chip-link" data-section="products" data-field="lakossagi1">Lakoss√°gi red≈ënykapuk</span>
              <span class="chip-link" data-section="products" data-field="lakossagi2">Szekcion√°lt gar√°zskapuk</span>
              <span class="chip-link" data-section="products" data-field="lakossagi3">Billen≈ëkapuk</span>
            </div>
            <a href="#contact" class="card-footer-link" data-section="products" data-field="lakossagicontact">Aj√°nlat gar√°zskapura ‚Üí</a>
          </article>

          <article class="card">
            <div class="card-tag" data-section="products" data-field="ipari_top">Ipari megold√°sok</div>
            <div class="card-title" data-section="products" data-field="iprai_title">Ipari kapuk</div>
            <p class="icon-card-body" data-section="products" data-field="ipari_text">
              Megb√≠zhat√≥ ipari kapuk rakt√°rakhoz, csarnokokhoz √©s logisztikai k√∂zpontokhoz.
            </p>
            <div class="card-links">
              <span class="chip-link" data-section="products" data-field="ipari1">Ipari red≈ënykapuk</span>
              <span class="chip-link" data-section="products" data-field="ipari2">Ipari szekcion√°lt kapuk</span>
              <span class="chip-link" data-section="products" data-field="ipari3">Gyorskapuk</span>
            </div>
            <a href="#contact" class="card-footer-link" data-section="products" data-field="iparicontact">Ipari kapu aj√°nlat ‚Üí</a>
          </article>

          <article class="card">
            <div class="card-tag" data-section="products" data-field="mozgas_top">Mozgat√°stechnika</div>
            <div class="card-title" data-section="products" data-field="mozgas_title">Kapumozgat√≥ meghajt√°sok</div>
            <p class="icon-card-body" data-section="products" data-field="mozgas_text">
              Kapumozgat√≥ motorok lakoss√°gi √©s ipari felhaszn√°l√°sra.
            </p>
            <div class="card-links">
              <span class="chip-link" data-section="products" data-field="mozgas1">Sz√°rnyas kapu motorok</span>
              <span class="chip-link" data-section="products" data-field="mozgas2">Tol√≥kapu motorok</span>
              <span class="chip-link" data-section="products" data-field="mozgas3">Gar√°zskapu motorok</span>
            </div>
            <a href="#contact" class="card-footer-link" data-section="products" data-field="mozgascontact">Kapumozgat√≥ megold√°sok ‚Üí</a>
          </article>

          <article class="card">
            <div class="card-tag" data-section="products" data-field="belep_top">Bel√©ptet√©s</div>
            <div class="card-title" data-section="products" data-field="belep_title">Automata √ºvegajt√≥k &amp; soromp√≥k</div>
            <p class="icon-card-body" data-section="products" data-field="belep_text">
              Modern, megb√≠zhat√≥ bel√©ptet√©si rendszerek √ºzletekhez, irod√°khoz, parkol√≥khoz.
            </p>
            <div class="card-links">
              <span class="chip-link" data-section="products" data-field="belep1">Automata √ºvegajt√≥k</span>
              <span class="chip-link" data-section="products" data-field="belep2">Soromp√≥k</span>
            </div>
            <a href="#contact" class="card-footer-link" data-section="products" data-field="belepcontact">Bel√©ptet≈ërendszer aj√°nlat ‚Üí</a>
          </article>

          <article class="card">
            <div class="card-tag" data-section="products" data-field="kiegesz_top">Kieg√©sz√≠t≈ëk</div>
            <div class="card-title" data-section="products" data-field="kiegesz_title">T√°vir√°ny√≠t√≥k, fotocell√°k, klaviat√∫r√°k</div>
            <p class="icon-card-body" data-section="products" data-field="kiegesz_text">
              Biztons√°got √©s k√©nyelmet n√∂vel≈ë kieg√©sz√≠t≈ëk sz√©les v√°laszt√©ka.
            </p>
            <div class="card-links">
              <span class="chip-link" data-section="products" data-field="kiegesz1">T√°vir√°ny√≠t√≥k</span>
              <span class="chip-link" data-section="products" data-field="kiegesz2">Fotocell√°k</span>
              <span class="chip-link" data-section="products" data-field="kiegesz3">Klaviat√∫r√°k</span>
            </div>
            <a href="#contact" class="card-footer-link" data-section="products" data-field="kiegeszcontact">Kieg√©sz√≠t≈ëk ir√°nt √©rdekl≈ëd√∂m ‚Üí</a>
          </article>

          <article class="card">
            <div class="card-tag" data-section="products" data-field="kerit_top">Ker√≠t√©smegold√°sok</div>
            <div class="card-title" data-section="products" data-field="kerit_title">Alu ker√≠t√©sek &amp; egyedi utcai kapuk</div>
            <p class="icon-card-body" data-section="products" data-field="kerit_text">
              Tart√≥s √©s eleg√°ns alu ker√≠t√©sek, szem√©lyre szabott utcai kapukkal.
            </p>
            <div class="card-links">
              <span class="chip-link" data-section="products" data-field="kerit1">Alu ker√≠t√©sek</span>
              <span class="chip-link" data-section="products" data-field="kerit2">Egyedi utcai kapuk</span>
            </div>
            <a href="#contact" class="card-footer-link" data-section="products" data-field="keritcontact">Ker√≠t√©s √©s utcai kapu aj√°nlat ‚Üí</a>
          </article>

          
        </div>-->

      <!-- Dinamikus term√©kv√°laszt√©k (Firebase /products) 
      <div class="section-header" style="margin-top: 2.5rem;">
        <div class="section-kicker">Term√©kv√°laszt√©k</div>
        <h3 class="section-title" style="font-size: 1.4rem;">
          Konkr√©t term√©keink
        </h3>
        <p class="section-lead">
          Az al√°bbi list√°ban a jelenleg el√©rhet≈ë term√©keket tal√°lja. A r√©szletes adatok√©rt
          kattintson a k√°rty√°ra.
        </p>
      </div>-->

      <div id="termekvalasztek-grid" class="card-grid">
        <!-- JS t√∂lti be a term√©keket -->
      </div>

      <p id="termekvalasztek-empty" class="references-empty" style="display:none;">
        Jelenleg nincs felvitt term√©k. Amint hozz√°adsz egyet az admin fel√ºleten,
        itt automatikusan meg fog jelenni.
      </p>

      </div>

      </div>

    </section>

    

    <!-- Top partners -->
    <section class="top-partners-section" id="top-partners" data-section="top-beszallitok">
      <div class="container">
        <div class="partners-strip">
              <div class="partners-inner">
                <div class="partners-heading">
                  <div
                    class="partners-heading-title"
                    data-section="top-beszallitok"
                    data-field="sectionTitle"
                  >
                    Megb√≠zhat√≥ besz√°ll√≠t√≥ partnereink
                  </div>
                  <p
                    class="partners-heading-lead"
                    data-section="top-beszallitok"
                    data-field="sectionLead"
                  >
                    A min≈ës√©gi kaputechnika m√∂g√∂tt megb√≠zhat√≥, hossz√∫ t√°v√∫ gy√°rt√≥i partnerek √°llnak.
                  </p>
                </div>

                <!-- Dinamikus r√°cs Firebase-b≈ël -->
                <div id="suppliers-grid" class="partners-grid" aria-live="polite"></div>

                <!-- √úres √°llapot -->
                <div id="suppliers-empty" class="partners-empty">
                  Jelenleg nincs r√∂gz√≠tett besz√°ll√≠t√≥ partner.
                </div>
              </div>
            </div>
      </div>
    </section>

    <!-- Services -->
    <section id="services">
      <div class="container">
        <div class="section-header">
          <div class="section-kicker" data-section="services" data-field="servic_kicker">Szolg√°ltat√°saink</div>
          <h2 class="section-title" data-section="services" data-field="servic_title">Teljes k√∂r≈± t√°mogat√°s a tervez√©st≈ël a szervizig</h2>
          <p class="section-lead" data-section="services" data-field="servic_lead">
            Nem csak term√©keket k√≠n√°lunk, hanem komplett megold√°st: felm√©r√©s, tan√°csad√°s, sz√°ll√≠t√°s,
            be√ºzemel√©s √©s m√°rkaf√ºggetlen szerviz egy k√©zben.
          </p>
        </div>

        <div id="services-grid" class="icon-grid"></div>
      </div>
    </section>

    <!-- Why us -->
    <section id="why-us">
      <div class="container">
        <div class="section-header">
          <div class="section-kicker" data-section="why-us" data-field="whyus_kicker">Mi√©rt v√°lasszon minket?</div>
          <h2 class="section-title" data-section="why-us" data-field="whyus_title">Min≈ës√©g, szak√©rtelem, hossz√∫ t√°v√∫ biztons√°g</h2>
          <p class="section-lead" data-section="why-us" data-field="whyus_lead">
            A megb√≠zhat√≥ min≈ës√©g≈±, csal√≥d√°smentes term√©kek mellett k√∂telezt√ºk el magunkat,
            mert sz√°munkra az √ñn hossz√∫ t√°v√∫ el√©gedetts√©ge a legfontosabb.
          </p>
        </div>

        <!--<div class="icon-grid">
          <article class="icon-card">
            <div class="icon-badge" data-section="why-us" data-field="minoseg_badge">‚≠ê</div>
            <h3 class="icon-card-title" data-section="why-us" data-field="minoseg_title">Magas min≈ës√©g≈± term√©kek</h3>
            <p class="icon-card-body" data-section="why-us" data-field="minoseg_text">
              Az √°rat nem az olcs√≥bb term√©k, hanem a min≈ës√©g hat√°rozza meg ‚Äì ennek megfelel≈ëen v√°logattuk √∂ssze k√≠n√°latunkat.
            </p>
          </article>

          <article class="icon-card">
            <div class="icon-badge" data-section="why-us" data-field="valasztek_badge">üì¶</div>
            <h3 class="icon-card-title" data-section="why-us" data-field="valasztek_title">Sz√©les term√©kv√°laszt√©k</h3>
            <p class="icon-card-body" data-section="why-us" data-field="valasztek_text">
              Az √∂sszes meghat√°roz√≥ gy√°rt√≥ term√©kei el√©rhet≈ëek, √≠gy mindig a legjobb megold√°st aj√°nljuk.
            </p>
          </article>

          <article class="icon-card">
            <div class="icon-badge" data-section="why-us" data-field="garancia_badge">üõ°Ô∏è</div>
            <h3 class="icon-card-title" data-section="why-us" data-field="garancia_title">Kiemelt garanci√°k</h3>
            <p class="icon-card-body" data-section="why-us" data-field="garancia_text">
              Besz√°ll√≠t√≥ink kiemelt garanci√°val h√°l√°lj√°k meg a min≈ës√©gi term√©kekbe vetett bizalmat.
            </p>
          </article>

          <article class="icon-card">
            <div class="icon-badge" data-section="why-us" data-field="ugyfelszolg_badge">ü§ù</div>
            <h3 class="icon-card-title" data-section="why-us" data-field="ugyfelszolg_title">Vev≈ëbar√°t √ºgyf√©lszolg√°lat</h3>
            <p class="icon-card-body" data-section="why-us" data-field="ugyfelszolg_text">
              Bar√°ts√°gos, felk√©sz√ºlt √ºgyf√©lszolg√°lat seg√≠t a megfelel≈ë term√©k √©s megold√°s kiv√°laszt√°s√°ban.
            </p>
          </article>

          <article class="icon-card">
            <div class="icon-badge" data-section="why-us" data-field="munkatars_badge">üë∑</div>
            <h3 class="icon-card-title" data-section="why-us" data-field="munkatars_title">Prec√≠z munkat√°rsak</h3>
            <p class="icon-card-body" data-section="why-us" data-field="munkatars_text">
              Hozz√°√©rt≈ë szakemberekb≈ël √°ll√≥ csapatunk magas szint≈± szakmai el≈ëk√©pzetts√©ggel dolgozik.
            </p>
          </article>

          <article class="icon-card">
            <div class="icon-badge" data-section="why-us" data-field="keszlet_badge">üè≠</div>
            <h3 class="icon-card-title" data-section="why-us" data-field="keszlet_title">B≈ës√©ges rakt√°rk√©szlet</h3>
            <p class="icon-card-body" data-section="why-us" data-field="keszlet_text">
              A leggyakrabban haszn√°lt term√©kekb≈ël mindig tartunk rakt√°ron a gyors kiszolg√°l√°s √©rdek√©ben.
            </p>
          </article>
        </div>-->

        <div id="whyus-grid" class="icon-grid"></div>

      </div>
    </section>

    <!-- Motto + References -->
    <section id="motto">
      <div class="container">
        <div class="motto-block">
          <div class="motto-title" data-section="motto" data-field="motto_title">Mott√≥nk</div>
          <div class="motto-text" data-section="motto" data-field="motto_text">
            Tudjuk, hogy egy nem megfelel≈ë min≈ës√©g≈± term√©k miatti rossz sz√°j√≠z tov√°bb tart, mint az alacsony √°r okozta
            pillanatnyi √∂r√∂m. Hisz√ºnk abban, hogy az √°rat nem egy olcs√≥bb term√©k, hanem a min≈ës√©g hat√°rozza meg.
            Ez√©rt mi a megb√≠zhat√≥ min≈ës√©g≈±, csal√≥d√°smentes term√©kek mellett k√∂telezt√ºk el magunkat.
          </div>
          <div class="refs-cta">
            <div class="refs-cta-text" data-section="motto" data-field="refs_text">
              N√©zze meg kor√°bbi munk√°inkr√≥l k√©sz√ºlt referencia fot√≥inkat, √©s inspir√°l√≥djon a megval√≥sult projektekb≈ël.
            </div>
            <a id="references-link" href="#references" class="btn-ghost" style="color: #222222" data-section="motto" data-field="refs_link">
              Referencia fot√≥k ir√°nt √©rdekl≈ëd√∂m
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- References -->
    <section id="references">
      <div class="container">
        <div class="section-header">
          <div class="section-kicker" data-section="references" data-field="refs_kicker">Referenci√°k</div>
          <h2 class="section-title" data-section="references" data-field="refs_title">Kor√°bbi munk√°ink</h2>
          <p class="section-lead" data-section="references" data-field="refs_lead">
            N√©h√°ny kiemelt projekt√ºnk az elm√∫lt id≈ëszakb√≥l. A fot√≥k az admin fel√ºleten kereszt√ºl t√∂lthet≈ëk fel,
            √©s automatikusan megjelennek itt.
          </p>
        </div>

        <div id="references-grid" class="references-grid">
          <!-- A k√°rty√°kat JavaScript t√∂lti be -->
        </div>

        <p id="references-empty" class="references-empty" style="display:none;" data-section="references" data-field="refs_empty_text">
          Jelenleg m√©g nincs felt√∂lt√∂tt referencia fot√≥. Amint hozz√°adsz k√©peket az admin fel√ºleten,
          itt automatikusan megjelennek.
        </p>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact">
      <div class="container">
        <div class="section-header">
          <div class="section-kicker" data-section="contact" data-field="contact_kicker">Kapcsolat</div>
          <h2 class="section-title" data-section="contact" data-field="contact_title">Vegye fel vel√ºnk a kapcsolatot</h2>
          <p class="section-lead" data-section="contact" data-field="contact_text_main">
            Ha term√©keinkkel vagy szolg√°ltat√°sainkkal kapcsolatban k√©rd√©se van, vagy szaktan√°csra lenne sz√ºks√©ge,
            forduljon hozz√°nk bizalommal ‚Äì sz√≠vesen seg√≠t√ºnk.
          </p>
        </div>

        <div class="contact-grid">
          <!--<div class="contact-card" style="display: flex; flex-direction: column; justify-content: space-between;">
              <div>
                <p class="icon-card-body" style="margin-bottom:1.2rem;" data-section="contact" data-field="contact_text">
                  K√ºldje el elk√©pzel√©s√©t, √©s koll√©g√°ink r√∂vid id≈ën bel√ºl felveszik √ñnnel a kapcsolatot
                  egy szem√©lyre szabott aj√°nlattal. Az al√°bbi el√©rhet≈ës√©geken is rendelkez√©s√©re √°llunk.
                </p>
              </div>
              <div>
                <button
                  class="btn-primary"
                  style="width:100%;justify-content:center;box-shadow:none;"
                  data-section="contact"
                  data-field="contact_mail"
                  onclick="window.location.href='mailto:mesztorkaputechnika1@gmail.com';"
                >
                  Aj√°nlatk√©r√©s e-mailben
                </button>

                <p class="contact-highlight" data-section="contact" data-field="contact_highlight">
                  Tipp: csatoljon fot√≥t, m√©reteket √©s r√∂vid le√≠r√°st, √≠gy gyorsabban tudunk pontos aj√°nlatot adni.
                </p>
              </div>
          </div>-->

          <div class="form-container">
              <div class="form">
                  <span class="heading" data-section="contact" data-field="contact_heading">L√©pjen vel√ºnk kapcsolatba!</span>
                  <p class="icon-card-body" style="margin-bottom:1.2rem;" data-section="contact" data-field="contact_text">
                    K√ºldje el elk√©pzel√©s√©t, √©s koll√©g√°ink r√∂vid id≈ën bel√ºl felveszik √ñnnel a kapcsolatot
                    egy szem√©lyre szabott aj√°nlattal. Az al√°bbi el√©rhet≈ës√©geken is rendelkez√©s√©re √°llunk.
                  </p>
                  <input placeholder="N√©v" type="text" class="input">
                  <input placeholder="Email" id="mail" type="email" class="input">
                  <textarea placeholder="√úzenet" rows="10" cols="30" id="message" name="message" class="textarea"></textarea>
                  <p class="contact-highlight" data-section="contact" data-field="contact_highlight">
                    Tipp: csatoljon fot√≥t, m√©reteket √©s r√∂vid le√≠r√°st, √≠gy gyorsabban tudunk pontos aj√°nlatot adni.
                  </p>
                  <div class="button-container">
                  <div class="send-button" style="cursor: pointer;">K√ºld√©s</div>
              </div>
          </div>
          </div>

          <div class="contact-card">
            <div class="contact-item">
              <div class="contact-icon" data-section="contact" data-field="contact_t_icon">üìû</div>
              <div>
                <div class="contact-label" data-section="contact" data-field="contact_t_label">Telefon</div>
                <div data-section="contact" data-field="contact_telo">06-22-331-332</div>
                <div data-section="contact" data-field="contact_mobil">Mobil: 06-20-977-09-07</div>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon" data-section="contact" data-field="contact_m_icon">‚úâÔ∏è</div>
              <div>
                <div class="contact-label" data-section="contact" data-field="contact_m_label">E-mail</div>
                <div data-section="contact" class="contactemail" data-field="contact_m_address">mesztorkaputechnika1@gmail.com</div>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon" data-section="contact" data-field="contact_l_icon">üìç</div>
              <div>
                <div class="contact-label" data-section="contact" data-field="contact_l_label">Bemutat√≥terem</div>
                <div data-section="contact" data-field="contact_l_address">Sz√©kesfeh√©rv√°r, Ber√©nyi √∫t 81.</div>
                <div class="contact-highlight" data-section="contact" data-field="contact_openhour">
                  √úgyf√©lfogad√°s: H√©tf≈ë‚ÄìP√©ntek 8:00‚Äì12:00 √©s 13:00‚Äì17:00
                </div>
              </div>
            </div>

            <div class="contact-item">
              <div class="contact-icon" data-section="contact" data-field="contact_f_icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
                  <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
                </svg>
              </div>
              <div>
                <div class="contact-label" data-section="contact" data-field="contact_f_label"><a style="cursor: pointer;" href="https://facebook.com/mesztorkaputechnika">Facebook</a></div>
                <div data-section="contact" data-field="contact_f_address">/mesztorkaputechnika</div>
              </div>
            </div>
            <div class="contact-card-map">
            <div class="contact-map">
              <div class="contact-map-frame">
                <iframe
                  loading="lazy"
                  style="width:100%; margin:0px; border:thin solid lightgrey; border-radius: 24px;height: 250px;"
                  allowfullscreen
                  referrerpolicy="no-referrer-when-downgrade"
                  src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2711.5744152118177!2d18.427701676388274!3d47.20340921573286!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4769f7c6a3f97fab%3A0x18808bf47ea10725!2sMesz-Tor%20Kft.%20-%20Kaputechnika!5e0!3m2!1shu!2shu!4v1762281591018!5m2!1shu!2shu">
                </iframe>
              </div>
            </div>
          </div>
          </div>
        </div>

          

      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer>
    <div class="container footer-inner">
      <div data-section="footer" data-field="footer_copyright">¬© MESZ-TOR Kft. ‚Äì Kaputechnikai szak√ºzlet, Sz√©kesfeh√©rv√°r</div>
      <div class="footer-links">
        <a href="#hero">Kezd≈ëlap</a>
        <a href="#">√Åltal√°nos szerz≈ëd√©si felt√©telek</a>
        <a href="#">Adatv√©delmi t√°j√©koztat√≥</a>
        <a href="#">Cookie szab√°lyzat</a>
      </div>
    </div>
  </footer>

    <script type="module">
    import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getDatabase, ref, set, update, get } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";
    import { getFirestore, collection, getDocs, doc, getDoc, setDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";


    const firebaseConfig = {
      apiKey: "AIzaSyAZUGCJkn9L4xH_M8L0fZYTUresZ9qYPqo",
      authDomain: "flymeto-696d0.firebaseapp.com",
      databaseURL: "https://flymeto-696d0-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "flymeto-696d0",
      storageBucket: "flymeto-696d0.firebasestorage.app",
      messagingSenderId: "651204605205",
      appId: "1:651204605205:web:d5dfbf3698be7ac6ee251c",
      measurementId: "G-4L7YN2X9YL"
    };

    const gridEl  = document.getElementById("references-grid");
    const emptyEl = document.getElementById("references-empty");

    const suppliersGrid  = document.getElementById("suppliers-grid");
    const suppliersEmpty = document.getElementById("suppliers-empty");


    let app;
    let db;
    let fs;
    let firebaseEnabled = false;

    try {
      if (firebaseConfig.apiKey) {
        app = getApps().length ? getApp() : initializeApp(firebaseConfig);
        db  = getDatabase(app);      // RTDB: csak ha haszn√°lod (pl. analitika)
        fs  = getFirestore(app);     // Firestore: tartalom innen j√∂n
        firebaseEnabled = true;
      }
    } catch (err) {
      console.warn("[firebase] init hiba ‚Äì demo m√≥d:", err);
      firebaseEnabled = false;
    }

    let auth;
    let currentUser = null;

    auth = getAuth(app);
    onAuthStateChanged(auth, (u)=> currentUser = u);

    const sliderSection = document.getElementById("hero-slider");
    const trackEl       = document.getElementById("heroSliderTrack");
    const dotsEl        = document.getElementById("heroSliderDots");
    const prevBtn       = document.getElementById("heroSliderPrev");
    const nextBtn       = document.getElementById("heroSliderNext");

    let slides = [];
    let currentIndex = 0;
    let autoplayTimer = null;
    const AUTOPLAY_MS = 6000;

    function updateSliderPosition() {
      if (!trackEl || !slides.length) return;
      const offset = currentIndex * -100;
      trackEl.style.transform = `translateX(${offset}%)`;

      if (dotsEl) {
        const dots = dotsEl.querySelectorAll(".hero-slider-dot");
        dots.forEach((dot, idx) => {
          if (idx === currentIndex) {
            dot.classList.add("is-active");
          } else {
            dot.classList.remove("is-active");
          }
        });
      }
    }

    function goToSlide(index) {
      if (!slides.length) return;
      const max = slides.length;
      currentIndex = (index + max) % max;
      updateSliderPosition();
    }

    function nextSlide() {
      goToSlide(currentIndex + 1);
    }

    function prevSlide() {
      goToSlide(currentIndex - 1);
    }

    function startAutoplay() {
      if (autoplayTimer || slides.length <= 1) return;
      autoplayTimer = setInterval(nextSlide, AUTOPLAY_MS);
    }

    function stopAutoplay() {
      if (!autoplayTimer) return;
      clearInterval(autoplayTimer);
      autoplayTimer = null;
    }

    function renderHeroSlider(items) {
      if (!sliderSection || !trackEl || !dotsEl) return;

      if (!items || !items.length) {
        sliderSection.style.display = "none";
        return;
      }

      sliderSection.style.display = "";
      trackEl.innerHTML = "";
      dotsEl.innerHTML = "";

      slides = items.slice();

      items.forEach((item, idx) => {
        const slideEl = document.createElement("article");
        slideEl.className = "hero-slide";

        if (item.imageUrl) {
          const img = document.createElement("img");
          img.src = item.imageUrl;
          img.alt = item.title || "Slider k√©p";
          img.loading = "lazy";
          slideEl.appendChild(img);
        }

        if (item.title || item.subtitle) {
          const overlay = document.createElement("div");
          overlay.className = "hero-slide-overlay";

          if (item.title) {
            const h = document.createElement("div");
            h.className = "hero-slide-title";
            h.textContent = item.title;
            overlay.appendChild(h);
          }

          if (item.subtitle) {
            const p = document.createElement("div");
            p.className = "hero-slide-subtitle";
            p.textContent = item.subtitle;
            overlay.appendChild(p);
          }

          slideEl.appendChild(overlay);
        }

        trackEl.appendChild(slideEl);

        const dot = document.createElement("button");
        dot.type = "button";
        dot.className = "hero-slider-dot";
        dot.setAttribute("aria-label", `Ugr√°s a(z) ${idx + 1}. slider k√©pre`);
        dot.addEventListener("click", () => {
          stopAutoplay();
          goToSlide(idx);
          startAutoplay();
        });
        dotsEl.appendChild(dot);
      });

      currentIndex = 0;
      updateSliderPosition();
      startAutoplay();
    }

    async function loadHeroSlider() {
      if (!sliderSection || !trackEl) return;

      if (!firebaseEnabled || !fs) {
        sliderSection.style.display = "none";
        return;
      }

      try {
        const snap = await getDocs(collection(fs, "heroSlider"));
        if (snap.empty) {
          sliderSection.style.display = "none";
          return;
        }

        const items = snap.docs.map((docSnap) => ({
            id: docSnap.id,
            ...(docSnap.data() || {})
          }))
          .map((d) => ({
            id: d.id,
            title: d.title || "",
            subtitle: d.subtitle || "",
            imageUrl: d.imageUrl || d.imageDataUrl || "",
            createdAt: d.createdAt || 0,
            order: d.order ?? null,
          }))
          .sort((a, b) => {
            const ao = Number.isFinite(Number(a.order)) ? Number(a.order) : null;
            const bo = Number.isFinite(Number(b.order)) ? Number(b.order) : null;
            if (ao != null && bo != null) return ao - bo;
            if (ao != null) return -1;
            if (bo != null) return 1;
            return (a.createdAt || 0) - (b.createdAt || 0);
          });


        renderHeroSlider(items);
      } catch (err) {
        console.warn("[heroSlider] bet√∂lt√©s hiba:", err);
        sliderSection.style.display = "none";
      }
    }

    if (prevBtn) prevBtn.addEventListener("click", () => {
      stopAutoplay();
      prevSlide();
      startAutoplay();
    });

    if (nextBtn) nextBtn.addEventListener("click", () => {
      stopAutoplay();
      nextSlide();
      startAutoplay();
    });

    if (sliderSection) {
      sliderSection.addEventListener("mouseenter", stopAutoplay);
      sliderSection.addEventListener("mouseleave", startAutoplay);
      sliderSection.addEventListener("focusin", stopAutoplay);
      sliderSection.addEventListener("focusout", startAutoplay);
    }

    /* ------------ LAYOUT ‚Üí NAV (layoutBoards alapj√°n) ------------ */


    const navLinksEl = document.querySelector(".main-nav .nav-links");
    let navClickHandlerAttached = false;

    // Tartalom bet√∂lt√©s + adminPreview eset√©n inline szerkeszt√©s
    if (firebaseEnabled) {
      initContentInline().catch(err => console.warn("Tartalom bet√∂lt√©s hiba:", err));
    }

    // Statikus nav: kattint√°skezel≈ë + csak desktopon "leg√∂rd√ºl≈ës" dropdown
    if (navLinksEl) {
      attachNavClickHandler();
      attachDropdownHoverFix();
    }


    // layout-kulcs ‚Üí fallback section ID
    const KEY_FALLBACK_IDS = {
      hero: "hero",
      "termekek-attekintes": "products",
      "garazskapuk": "products",
      "ipari-kapuk": "products",
      "kapumozgatok": "products",
      "automata-bejaratok": "products",
      "miert-mesztor": "why-us",
      "top-beszallitok": "top-partners",   
      "kiemelt-szolgaltatasok": "services",
      "helyszini-felmeres": "services",
      "tanacsadas": "services",
      "gyors-szerviz": "services",
      "munkafolyamat": "services",
      "referencia-garazskapuk": "references",
      "referencia-ipari-kapuk": "references",
      "referencia-fotok": "references",
      "kapcsolat-form": "contact",
      "kapcsolat-map": "contact"
    };

    


    function findSectionByKey(key) {
      if (!key) return null;

      // 1) pr√≥b√°ljuk data-section alapj√°n (ha k√©s≈ëbb r√°teszed a szekci√≥kra)
      let el = document.querySelector(`[data-section="${key}"]`);
      if (el) {
        const sec = el.closest("section, footer");
        return sec || el;
      }

      // 2) fallback: el≈ëre ismert ID-k
      const fbId = KEY_FALLBACK_IDS[key];
      if (fbId) {
        const sec2 = document.getElementById(fbId);
        if (sec2) return sec2;
        if (fbId === "footer") {
          const f = document.querySelector("footer");
          if (f) return f;
        }
      }

      // 3) utols√≥ es√©ly: l√©tezik ilyen ID?
      const sec3 = document.getElementById(key);
      if (sec3) return sec3;
      if (key === "footer") return document.querySelector("footer") || null;

      return null;
    }

    
    // ----- Szekci√≥k mutat√°sa / elrejt√©se (Kapcsolat full-screen m√≥d) -----
    const mainEl = document.querySelector("main");
    const PAGE_SECTIONS = mainEl ? Array.from(mainEl.querySelectorAll("section")) : [];

    function isContactKey(key) {
      return key === "kapcsolat-form" || key === "kapcsolat-map" || key === "contact";
    }

    function showOnlyContactSection() {
      if (!PAGE_SECTIONS.length) return;
      PAGE_SECTIONS.forEach((sec) => {
        // a contact r√©sz lehet egyetlen section (id="contact"), de ha k√©s≈ëbb t√∂bb contact r√©sz lesz,
        // akkor azokat is megtartjuk (pl. kapcsolat-form / kapcsolat-map)
        if (sec.id === "contact" || isContactKey(sec.id)) {
          sec.style.display = "";
        } else {
          sec.style.display = "none";
        }
      });
    }

function showAllSections() {
      if (!PAGE_SECTIONS.length) return;
      PAGE_SECTIONS.forEach((sec) => {
        sec.style.display = "";
      });
    }

    
      function attachNavClickHandler() {
        if (!navLinksEl || navClickHandlerAttached) return;
        navClickHandlerAttached = true;

        navLinksEl.addEventListener("click", (e) => {
          const t = e.target;
          if (!(t instanceof HTMLElement)) return;

          // minden nav linket kezel√ºnk, ami az oldalon bel√ºli hash-re mutat (#...)
          const a = t.closest("a[href]");
          if (!a || !navLinksEl.contains(a)) return;

          const href = (a.getAttribute("href") || "").trim();
          const hashKey = href.startsWith("#") ? href.slice(1) : "";

          // els≈ëdlegesen data-section-key, de ha nincs, akkor a href hash legyen a kulcs
          const key = (a.dataset.sectionKey || hashKey).trim();
          if (!key) return;

          e.preventDefault();

          // Kapcsolat: csak a contact szekci√≥ maradjon l√°that√≥
          if (isContactKey(key)) {
            showOnlyContactSection();
          } else {
            // b√°rmely m√°s men√º vissza√°ll√≠tja az eg√©sz oldalt
            showAllSections();
          }

          const secEl = findSectionByKey(key);
          if (secEl) {
            secEl.scrollIntoView({ behavior: "smooth", block: "start" });
          } else {
            // ha nincs konkr√©t szekci√≥, menj√ºnk fel a tetej√©re
            window.scrollTo({ top: 0, behavior: "smooth" });
          }

          // URL hash friss√≠t√©s (ugr√°s n√©lk√ºl)
          try {
            history.pushState(null, "", "#" + key);
          } catch (_) {}

          // mobil men√º z√°r√°sa kattint√°s ut√°n
          if (navLinksEl.classList.contains("open")) {
            navLinksEl.classList.remove("open");
            const btn = document.querySelector(".nav-toggle");
            if (btn?.classList.contains("open")) btn.classList.remove("open");
          }
        });
      }

// --- Dropdown hover jav√≠t√°s: kis k√©sleltet√©ssel z√°rjuk csak be ---
    function attachDropdownHoverFix() {
      if (!navLinksEl) return;

      const items = navLinksEl.querySelectorAll(".nav-item.has-dropdown");

      items.forEach((item) => {
        // ha m√°r r√° van k√∂tve, ne dupl√°zzuk az eventeket
        if (item.dataset.dropdownHoverWired === "1") return;
        item.dataset.dropdownHoverWired = "1";

        const dropdown = item.querySelector(".nav-dropdown");
        if (!dropdown) return;

        let hideTimer = null;

        const open = () => {
          if (hideTimer) {
            clearTimeout(hideTimer);
            hideTimer = null;
          }
          item.classList.add("dropdown-open");
        };

        const scheduleClose = () => {
          hideTimer = window.setTimeout(() => {
            item.classList.remove("dropdown-open");
          }, 120); // 0.12 mp el√©g, hogy √°t√©rj a gap-en
        };

        // ha a fels≈ë men√ºre visszam√©sz
        item.addEventListener("mouseenter", open);
        item.addEventListener("mouseleave", scheduleClose);

        // ha a leny√≠l√≥ra m√©sz r√° / onnan j√∂ssz le
        dropdown.addEventListener("mouseenter", open);
        dropdown.addEventListener("mouseleave", scheduleClose);
      });
    }

    // --- Dropdown meta adatok: ikon + sz√∂veg ---
const NAV_DROPDOWN_HIDDEN_KEYS = new Set(["hero", "footer"]);

const NAV_CARD_META = {
  "mirt-mi": {
    icon: "‚≠ê",
    label: "Mi√©rt mi?",
    sub: "Legfontosabb el≈ënyeink, mi√©rt √©rdemes vel√ºnk dolgozni.",
    path: "#why-us"
  },
  "szolgltatsok": {
    icon: "üõ†Ô∏è",
    label: "Szolg√°ltat√°saink",
    sub: "Tan√°csad√°s, kivitelez√©s, szerviz ‚Äì a teljes folyamat egy k√©zben."
  },
  "projects": {
    icon: "üìê",
    label: "Term√©kv√°laszt√©k",
    sub: "R√∂vid mott√≥ + aj√°nlatk√©r√©s blokk a lap alj√°n."
  },
  "referencik": {
    icon: "üì∏",
    label: "Referenci√°k",
    sub: "Elk√©sz√ºlt gar√°zs- √©s ipari kapuink, fot√≥kkal."
  },
  "top-termekek": {
    icon: "üì¶",
    label: "Top term√©kek",
    sub: "Legn√©pszer≈±bb kaputechnikai megold√°saink."
  },
  "beszllt-partnereink": {
    icon: "üè¢",
    label: "Top besz√°ll√≠t√≥k",
    sub: "Megb√≠zhat√≥ gy√°rt√≥k, akikkel egy√ºtt dolgozunk."
  }
};

/* ------------ WHY-US ‚Äì k√°rty√°k Firestore-b√≥l ------------ */

const whyUsGrid = document.getElementById("whyus-grid");
let whyUsCache = [];

const demoWhyUs = [
  { id:"whyus1", badge:"‚≠ê", title:"Magas min≈ës√©g≈± term√©kek", body:"Min≈ës√©gi kaputechnikai megold√°sok, hossz√∫ √©lettartammal." },
  { id:"whyus2", badge:"üß±", title:"Sz√©les v√°laszt√©k", body:"Gar√°zskapu, ipari kapu, soromp√≥, kieg√©sz√≠t≈ëk ‚Äî t√∂bb gy√°rt√≥t√≥l." },
  { id:"whyus3", badge:"üõ°Ô∏è", title:"Kiemelt garanci√°k", body:"Megb√≠zhat√≥ besz√°ll√≠t√≥i h√°tt√©r √©s garanci√°lis t√°mogat√°s." },
  { id:"whyus4", badge:"ü§ù", title:"Vev≈ëbar√°t √ºgyf√©lszolg√°lat", body:"Seg√≠t√ºnk v√°lasztani, tervezni, √©s v√©gigk√≠s√©rj√ºk a folyamatot." },
  { id:"whyus5", badge:"üë∑", title:"Tapasztalt csapat", body:"Szak√©rtelem felm√©r√©st≈ël a kivitelez√©sig √©s szervizig." },
  { id:"whyus6", badge:"üì¶", title:"Rakt√°r / gyors beszerz√©s", body:"N√©pszer≈± term√©kek el√©rhet≈ëk, egyediekre gyors beszerz√©st adunk." }
];

// FONTOS: ezt n√°latok m√°r haszn√°lja a services is ‚Äì ne defini√°ld dupl√°n!
/* const isAdminPreview = new URLSearchParams(location.search).has("adminPreview"); */

function normalizeWhyUs(d){
  return {
    id: d?.id ?? null,
    badge: d?.badge || "‚≠ê",
    title: d?.title || "",
    body: d?.body || "",
    orderIndex: (typeof d?.orderIndex === "number") ? d.orderIndex : 0,
    createdAt: d?.createdAt || 0,
    updatedAt: d?.updatedAt || 0
  };
}

function renderWhyUs(items, { admin=false } = {}){
  if(!whyUsGrid) return;

  const arr = (items || [])
    .map(normalizeWhyUs)
    .sort((a,b) => (a.orderIndex ?? 0) - (b.orderIndex ?? 0) || (a.createdAt ?? 0) - (b.createdAt ?? 0));

  whyUsCache = arr;
  whyUsGrid.innerHTML = "";

  arr.forEach(item => whyUsGrid.appendChild(createWhyUsCard(item, { admin })));
  if(admin) whyUsGrid.appendChild(createAddWhyUsCard());
}

function createWhyUsCard(item, { admin=false } = {}){
  const card = document.createElement("article");
  card.className = "icon-card";

  const badge = document.createElement("div");
  badge.className = "icon-badge";
  badge.textContent = item.badge || "‚≠ê";

  const title = document.createElement("div");
  title.className = "icon-card-title";
  title.textContent = item.title || "";

  const body = document.createElement("div");
  body.className = "icon-card-text";
  body.textContent = item.body || "";

  card.append(badge, title, body);

  // ugyanaz a CSS/UX, mint a services-n√©l (√∫j CSS nem kell)
  if(admin && firebaseEnabled && fs && item.id){
    const actions = document.createElement("div");
    actions.className = "svc-admin-actions";

    const editBtn = document.createElement("button");
    editBtn.type = "button";
    editBtn.className = "svc-admin-btn";
    editBtn.textContent = "‚úèÔ∏è";
    editBtn.title = "Szerkeszt√©s";
    editBtn.onclick = () => editWhyUs(item);

    const delBtn = document.createElement("button");
    delBtn.type = "button";
    delBtn.className = "svc-admin-btn danger";
    delBtn.textContent = "üóëÔ∏è";
    delBtn.title = "T√∂rl√©s";
    delBtn.onclick = () => deleteWhyUs(item);

    actions.append(editBtn, delBtn);
    card.append(actions);
  }

  return card;
}

function createAddWhyUsCard(){
  const card = document.createElement("article");
  card.className = "icon-card icon-card-add";

  const badge = document.createElement("div");
  badge.className = "icon-badge icon-badge-add";
  badge.textContent = "+";

  const title = document.createElement("div");
  title.className = "icon-card-title";
  title.textContent = "√öj k√°rtya";

  const text = document.createElement("div");
  text.className = "icon-card-text";
  text.textContent = "Kattints ide a hozz√°ad√°shoz.";

  card.append(badge, title, text);
  card.onclick = () => addWhyUs();

  return card;
}

async function addWhyUs(){
  if(!firebaseEnabled || !fs) return alert("A Firebase nincs inicializ√°lva / nincs bejelentkez√©s.");

  const badge = prompt("Ikon (emoji):", "‚ú®");
  if(badge === null) return;

  const title = prompt("C√≠m:", "");
  if(title === null) return;

  const body = prompt("Le√≠r√°s:", "");
  if(body === null) return;

  const maxOrder = whyUsCache.reduce((m,it)=>Math.max(m, (typeof it.orderIndex==="number" ? it.orderIndex : 0)), -1);
  const id = doc(collection(fs, "whyUs")).id;

  const payload = { badge, title, body, orderIndex: maxOrder + 1, createdAt: Date.now(), updatedAt: Date.now() };

  try{
    await setDoc(doc(fs, "whyUs", id), payload);
    await loadWhyUs();
  }catch(err){
    console.warn("[whyUs] ment√©s hiba:", err);
    alert("Nem siker√ºlt menteni.");
  }
}

async function editWhyUs(item){
  if(!firebaseEnabled || !fs || !item?.id) return;

  const badge = prompt("Ikon (emoji):", item.badge || "‚ú®");
  if(badge === null) return;

  const title = prompt("C√≠m:", item.title || "");
  if(title === null) return;

  const body = prompt("Le√≠r√°s:", item.body || "");
  if(body === null) return;

  try{
    await setDoc(doc(fs, "whyUs", item.id), { badge, title, body, updatedAt: Date.now() }, { merge:true });
    await loadWhyUs();
  }catch(err){
    console.warn("[whyUs] szerkeszt√©s hiba:", err);
    alert("Nem siker√ºlt menteni.");
  }
}

async function deleteWhyUs(item){
  if(!firebaseEnabled || !fs || !item?.id) return;
  if(!confirm("Biztosan t√∂rl√∂d ezt a k√°rty√°t?")) return;

  try{
    await deleteDoc(doc(fs, "whyUs", item.id));
    await loadWhyUs();
  }catch(err){
    console.warn("[whyUs] t√∂rl√©s hiba:", err);
    alert("Nem siker√ºlt t√∂r√∂lni.");
  }
}

async function loadWhyUs(){
  if(!whyUsGrid) return;

  if(!firebaseEnabled || !fs){
    renderWhyUs(demoWhyUs, { admin: isAdminPreview });
    return;
  }

  try{
    const snap = await getDocs(collection(fs, "whyUs"));
    const items = snap.docs.map(d => ({ id: d.id, ...(d.data() || {}) }));

    // ha √ºres a collection, legyen demo (adminban √≠gy ‚Äúseedelhet≈ë‚Äù szerkeszt√©ssel)
    renderWhyUs(items.length ? items : demoWhyUs, { admin: isAdminPreview });
  }catch(err){
    console.warn("[whyUs] bet√∂lt√©s hiba:", err);
    renderWhyUs(demoWhyUs, { admin: isAdminPreview });
  }
}

function applyHeroImageFromContent() {
  const img = document.getElementById("hero-image");
  if (!img) return;

  // contentSections/hero -> heroImageSrc
  const src = sectionsCache?.hero?.heroImageSrc || sectionsCache?.hero?.heroImage || "";
  if (src) img.src = src;
}

function pickImageFile() {
  return new Promise((resolve) => {
    const input = document.createElement("input");
    input.type = "file";
    input.accept = "image/*";
    input.onchange = () => resolve(input.files?.[0] || null);
    input.click();
  });
}

function estimateBase64Bytes(dataUrl) {
  const i = dataUrl.indexOf("base64,");
  if (i < 0) return dataUrl.length;
  const b64 = dataUrl.slice(i + 7);
  return Math.floor((b64.length * 3) / 4); // k√∂zel√≠t√©s
}

async function fileToResizedJpegDataUrl(file, maxW, quality) {
  const dataUrl = await new Promise((resolve, reject) => {
    const r = new FileReader();
    r.onload = () => resolve(r.result);
    r.onerror = reject;
    r.readAsDataURL(file);
  });

  const img = await new Promise((resolve, reject) => {
    const im = new Image();
    im.onload = () => resolve(im);
    im.onerror = reject;
    im.src = dataUrl;
  });

  const w0 = img.width || 1;
  const h0 = img.height || 1;
  const ratio = Math.min(maxW / w0, 1);
  const w = Math.round(w0 * ratio);
  const h = Math.round(h0 * ratio);

  const canvas = document.createElement("canvas");
  canvas.width = w;
  canvas.height = h;
  const ctx = canvas.getContext("2d");
  ctx.drawImage(img, 0, 0, w, h);

  return canvas.toDataURL("image/jpeg", quality);
}

async function compressForFirestore(file) {
  // Firestore doc limit ~1MiB, hagyjunk tartal√©kot
  const LIMIT = 900_000;

  const widths = [1400, 1200, 1000, 900, 800];
  const qualities = [0.85, 0.75, 0.65, 0.55];

  for (const maxW of widths) {
    for (const q of qualities) {
      const out = await fileToResizedJpegDataUrl(file, maxW, q);
      if (estimateBase64Bytes(out) <= LIMIT) return out;
    }
  }
  return null;
}

function setupHeroImageAdminEdit() {
  const img = document.getElementById("hero-image");
  if (!img) return;
  if (!inlineEditMode || !firebaseEnabled || !fs) return;

  img.style.cursor = "pointer";
  img.title = "Kattints a k√©p cser√©j√©hez (admin)";

  img.addEventListener("click", async (e) => {
    e.preventDefault();
    e.stopPropagation();

    if (!currentUser) {
      alert("A k√©p cser√©j√©hez be kell jelentkezned (admin).");
      return;
    }

    const file = await pickImageFile();
    if (!file) return;

    try {
      const dataUrl = await compressForFirestore(file);
      if (!dataUrl) {
        alert("A k√©p t√∫l nagy. V√°lassz kisebb f√°jlt, vagy v√°gd/ment√©sd le kisebbre.");
        return;
      }

      await setDoc(
        doc(fs, "contentSections", "hero"),
        { heroImageSrc: dataUrl, updatedAt: Date.now() },
        { merge: true }
      );

      img.src = dataUrl;
    } catch (err) {
      console.warn("[hero-image] ment√©s hiba:", err);
      alert("Nem siker√ºlt menteni a k√©pet (lehet adblock / jogosults√°g / h√°l√≥zat).");
    }
  });
}


/* ------------ SZOLG√ÅLTAT√ÅSAINK ‚Äì k√°rty√°k Firestore-b√≥l ------------ */

const servicesGrid = document.getElementById("services-grid");
let servicesCache = [];

const demoServices = [
  { badge:"üìù", title:"Aj√°nlat k√©sz√≠t√©s", body:"Gyors, szem√©lyre szabott, d√≠jmentes √°raj√°nlat k√©sz√≠t√©se az √ñn ig√©nyeire szabva." },
  { badge:"üìê", title:"Felm√©r√©s", body:"Prec√≠z helysz√≠ni felm√©r√©s szakk√©pzett munkat√°rsunk √°ltal, a legjobb m≈±szaki megold√°s √©rdek√©ben." },
  { badge:"üí¨", title:"Szaktan√°csad√°s", body:"Hozz√°√©rt≈ë koll√©g√°ink seg√≠tenek eligazodni a term√©kek, m√©retek √©s m≈±szaki lehet≈ës√©gek k√∂z√∂tt." },
  { badge:"üöö", title:"Sz√°ll√≠t√°s", body:"Szakszer≈±, s√©r√ºl√©smentes sz√°ll√≠t√°s a kaputechnikai term√©kek saj√°toss√°gainak figyelembev√©tel√©vel." },
  { badge:"üõ†", title:"Be√ºzemel√©s", body:"Magas sz√≠nvonal√∫ beszerel√©s √©s be√ºzemel√©s, hogy az √∫j kapu hossz√∫ t√°von megb√≠zhat√≥an m≈±k√∂dj√∂n." },
  { badge:"üîß", title:"Szervizel√©s, jav√≠t√°s", body:"M√°rkaf√ºggetlen kaputechnikai term√©kek jav√≠t√°sa, karbantart√°sa, gyors reakci√≥val." }
];

const isAdminPreview = new URLSearchParams(location.search).has("adminPreview");

function normalizeService(d){
  return {
    id: d.id || null,
    badge: d.badge || d.icon || "üîß",
    title: d.title || "",
    body: d.body || d.text || "",
    orderIndex: typeof d.orderIndex === "number" ? d.orderIndex : 0,
    createdAt: d.createdAt || 0
  };
}

async function addService(){
  if(!firebaseEnabled || !fs) return;

  const badge = (prompt("Ikon (emoji):", "üîß") || "").trim();
  if(!badge) return;

  const title = (prompt("C√≠m:", "") || "").trim();
  if(!title) return;

  const body = (prompt("Le√≠r√°s:", "") || "").trim();
  if(!body) return;

  const maxOrder = servicesCache.reduce(
    (m,it)=>Math.max(m, (typeof it.orderIndex==="number"? it.orderIndex : 0)),
    -1
  );

  const id = doc(collection(fs, "services")).id;
  const payload = {
    badge, title, body,
    orderIndex: maxOrder + 1,
    createdAt: Date.now(),
    updatedAt: Date.now()
  };

  try{
    await setDoc(doc(fs, "services", id), payload);
    await loadServices();
  }catch(err){
    console.warn("[services] ment√©s hiba:", err);
    alert("Nem siker√ºlt menteni.");
  }
}

async function editService(item){
  if(!firebaseEnabled || !fs || !item?.id) return;

  const badge = prompt("Ikon (emoji):", item.badge || "üîß");
  if(badge === null) return;

  const title = prompt("C√≠m:", item.title || "");
  if(title === null) return;

  const body = prompt("Le√≠r√°s:", item.body || "");
  if(body === null) return;

  try{
    await setDoc(
      doc(fs, "services", item.id),
      { badge: badge.trim(), title: title.trim(), body: body.trim(), updatedAt: Date.now() },
      { merge:true }
    );
    await loadServices();
  }catch(err){
    console.warn("[services] szerkeszt√©s hiba:", err);
    alert("Nem siker√ºlt menteni.");
  }
}

function createServiceCard(item, {admin=false}={}){
  const card = document.createElement("article");
  card.className = "icon-card";

  const badge = document.createElement("div");
  badge.className = "icon-badge";
  badge.textContent = item.badge || "üîß";

  const title = document.createElement("div");
  title.className = "icon-card-title";
  title.textContent = item.title || "";

  const body = document.createElement("div");
  body.className = "icon-card-text";
  body.textContent = item.body || "";

  card.appendChild(badge);
  card.appendChild(title);
  card.appendChild(body);

  if (admin && item.id && firebaseEnabled && fs){
    const actions = document.createElement("div");
    actions.className = "svc-admin-actions";

    const editBtn = document.createElement("button");
    editBtn.type="button";
    editBtn.className="svc-admin-btn";
    editBtn.textContent="‚úèÔ∏è";
    editBtn.title="Szerkeszt√©s";
    editBtn.addEventListener("click", async (ev)=>{
      ev.stopPropagation();
      await editService(item);
    });

    const delBtn = document.createElement("button");
    delBtn.type="button";
    delBtn.className="svc-admin-btn";
    delBtn.textContent="üóëÔ∏è";
    delBtn.title="T√∂rl√©s";
    delBtn.addEventListener("click", async (ev)=>{
      ev.stopPropagation();
      if (!confirm("Biztosan t√∂rl√∂d ezt a szolg√°ltat√°s k√°rty√°t?")) return;

      try{
        await deleteDoc(doc(fs, "services", item.id));
        await loadServices();
      }catch(err){
        console.warn("[services] t√∂rl√©s hiba:", err);
        alert("Nem siker√ºlt t√∂r√∂lni.");
      }
    });

    actions.appendChild(editBtn);
    actions.appendChild(delBtn);
    card.appendChild(actions);
  }

  return card;
}

function createAddServiceCard(){
  const add = document.createElement("article");
  add.className="icon-card icon-card-add";
  add.innerHTML = `
    <div class="icon-badge icon-badge-add">+</div>
    <div class="icon-card-title">√öj k√°rtya</div>
    <div class="icon-card-text">Kattints a hozz√°ad√°shoz</div>
  `;
  add.addEventListener("click", addService);
  return add;
}

function renderServices(items, {admin=false}={}){
  if(!servicesGrid) return;

  servicesGrid.innerHTML = "";
  servicesCache = (items || []).map(normalizeService);

  servicesCache.sort((a,b)=>{
    if (a.orderIndex !== b.orderIndex) return a.orderIndex - b.orderIndex;
    return (a.createdAt || 0) - (b.createdAt || 0);
  });

  servicesCache.forEach(it => servicesGrid.appendChild(createServiceCard(it, {admin})));

  if (admin) servicesGrid.appendChild(createAddServiceCard());
}

async function loadServices(){
  if(!servicesGrid) return;

  // nincs Firebase ‚Üí demo
  if(!firebaseEnabled || !fs){
    renderServices(demoServices, {admin:false});
    renderServices(demoServices, {admin:isAdminPreview});
    return;
  }

  try{
    const snap = await getDocs(collection(fs,"services"));
    if(snap.empty){
      // ha m√©g √ºres a kollekci√≥, maradjon a demo ‚Äì adminPreview-ben megjelenik a + k√°rtya
      renderServices(demoServices, {admin:isAdminPreview});
      return;
    }

    const items = snap.docs.map(d => ({ id:d.id, ...(d.data() || {}) }));
    renderServices(items, {admin:isAdminPreview});
  }catch(err){
    console.warn("[services] bet√∂lt√©s hiba:", err);
    renderServices(demoServices, {admin:false});
    renderServices(demoServices, {admin:isAdminPreview});
  }
}





function buildNavFromBoard(board) {
  if (!navLinksEl || !board || !Array.isArray(board.lists) || !board.lists.length) return;

  // Eredeti CTA felirat elment√©se, miel≈ëtt t√∂r√∂lj√ºk a navot
  const existingCtaBtn = document.querySelector(".nav-cta");
  const ctaText = existingCtaBtn?.textContent?.trim() || "Aj√°nlatk√©r√©s";

  // Statikus nav ki√ºr√≠t√©se
  navLinksEl.innerHTML = "";

  // Path ‚Üí melyik nav sz√∂veg mez≈ëh√∂z tartozzon
  const resolveNavFieldForPath = (path) => {
    const p = (path || "/").toLowerCase().trim();

    if (p === "/" || p === "/index" || p === "/fooldal") return "navHome";
    if (p.startsWith("/termek")) return "navProducts";
    if (p.startsWith("/szolgal")) return "navServices";
    if (p.startsWith("/miert") || p.startsWith("/rolunk")) return "navWhyUs";
    if (p.startsWith("/refer")) return "navReferences";
    if (p.startsWith("/kapcsolat") || p.startsWith("/contact")) return "navContact";

    return null;
  };

  board.lists.forEach((list) => {
    const cards = Array.isArray(list.cards) ? list.cards : [];
    const listTitle = list.title || "Oldal";
    const path = (list.path || "/").trim();
    const navField = resolveNavFieldForPath(path);

    const navItem = document.createElement("div");
    navItem.className = "nav-item";

    const primaryCard = cards[0];
    const primaryKey = primaryCard?.key || "";

    const topLink = document.createElement("a");
    topLink.href = "#";
    topLink.textContent = listTitle;

    // ide ugrik a f≈ë men√ºpont kattint√°skor
    if (primaryKey) {
      topLink.dataset.sectionKey = primaryKey;
    }

    // adminPreview m√≥dhoz
    if (navField) {
      topLink.dataset.section = "site";
      topLink.dataset.field = navField;
    }

    navItem.appendChild(topLink);

    // Kapcsolat lista: ne legyen dropdown
    const isContactList =
      navField === "navContact" ||
      cards.some((c) => c.key === "kapcsolat-form" || c.key === "kapcsolat-map");

    // T√∂bbi list√°n√°l, ha t√∂bb k√°rtya van ‚Üí dropdown
    if (!isContactList && cards.length > 1) {
      navItem.classList.add("has-dropdown");

      const dd = document.createElement("div");
      dd.className = "nav-dropdown";

      cards.forEach((card) => {
        const key = card.key || "";
        if (!key) return;

        // hero/footer NE jelenjen meg a dropdownban
        if (NAV_DROPDOWN_HIDDEN_KEYS.has(key)) return;

        const meta = NAV_CARD_META[key] || {};

        const a = document.createElement("a");
        a.href = meta.path || "#";
        a.addEventListener("click", (e) => {
          e.preventDefault(); // ne k√∂vesse a href-et
          const target = document.getElementById(meta.path  );
          if (target) {
            target.scrollIntoView({ behavior: "smooth" });
          }
        });
        a.className = "nav-dd-item";
        a.dataset.sectionKey = key;

        const iconSpan = document.createElement("span");
        iconSpan.className = "nav-dd-icon";
        iconSpan.textContent = meta.icon || "‚Ä¢";

        const mainSpan = document.createElement("span");
        mainSpan.className = "nav-dd-main";

        const titleSpan = document.createElement("span");
        titleSpan.className = "nav-dd-title";
        // ha van meta label, azt haszn√°ljuk, k√ºl√∂nben a k√°rtya c√≠m√©t
        titleSpan.textContent = meta.label || card.title || card.key || "";

        mainSpan.appendChild(titleSpan);

        if (meta.sub) {
          const subSpan = document.createElement("span");
          subSpan.className = "nav-dd-sub";
          subSpan.textContent = meta.sub;
          mainSpan.appendChild(subSpan);
        }

        a.appendChild(iconSpan);
        a.appendChild(mainSpan);

        dd.appendChild(a);
      });

      navItem.appendChild(dd);
    }

    navLinksEl.appendChild(navItem);
  });

  // CTA gomb a nav v√©g√©n ‚Äì ez is kap data-section / data-field-et
  const ctaBtn = document.createElement("button");
  ctaBtn.type = "button";
  ctaBtn.className = "nav-cta";
  ctaBtn.textContent = ctaText;
  ctaBtn.dataset.sectionKey = "kapcsolat-form";
  ctaBtn.dataset.section = "site";
  ctaBtn.dataset.field = "navCtaText";

  navLinksEl.appendChild(ctaBtn);

  attachNavClickHandler();
  attachDropdownHoverFix();
}



    // A f≈ëoldali szekci√≥k sorrendj√©nek igaz√≠t√°sa a "/" path-√∫ lista alapj√°n
    function reorderSectionsFromBoard(board) {
      const mainEl = document.querySelector("main");
      if (!mainEl || !board?.lists?.length) return;

      // az a lista, amelyiknek az √∫tvonala "/" ‚Äì ha nincs, akkor az els≈ë
      const mainList =
        board.lists.find(l => (l.path || "/") === "/") ||
        board.lists[0];

      if (!mainList) return;

      const cards = Array.isArray(mainList.cards) ? mainList.cards : [];
      if (!cards.length) return;

      const used = new Set();
      const ordered = [];

      // El≈ësz√∂r a board-on megadott szekci√≥k
      cards.forEach(card => {
        const key = card.key;
        if (!key) return;
        const sec = findSectionByKey(key);
        if (!sec) return;
        // Csak a <main>-en bel√ºli section√∂ket rendezz√ºk
        if (!mainEl.contains(sec)) return;
        if (used.has(sec)) return;

        used.add(sec);
        ordered.push(sec);
      });

      // Ut√°na a marad√©k section√∂k eredeti sorrendben
      const allSections = Array.from(mainEl.querySelectorAll("section"));
      allSections.forEach(sec => {
        if (!used.has(sec)) {
          ordered.push(sec);
        }
      });

      // √öj sorrend alkalmaz√°sa
      ordered.forEach(sec => {
        mainEl.appendChild(sec);
      });
    }

    async function initLayoutNav() {
      if (!firebaseEnabled || !fs || !navLinksEl) return;
      try {
        // Itt volt a bug: /board v√©g≈± √∫tvonalat olvastunk,
        // de az admin k√∂zvetlen√ºl settings/layoutBoards al√° menti a boardot.
        const snap = await getDoc(doc(fs, "settings", "layoutBoards"));
        if (!snap.exists()) return;
        const board = snap.data();
        if (board && Array.isArray(board.lists) && board.lists.length) {
          buildNavFromBoard(board);
          reorderSectionsFromBoard(board);
        }
      } catch (err) {
        console.warn("[layout/nav] hiba:", err);
      }
    }



    /* ------------ TARTALOM INLINE SZERKESZT√âS (adminPreview m√≥d) ------------ */

    const urlParams = new URLSearchParams(location.search);
    const inlineEditMode = urlParams.has("adminPreview");

    let sectionsCache = {};

    async function loadContentSections() {
      if (!firebaseEnabled || !fs) return;
      try {
        const snap = await getDocs(collection(fs, "contentSections"));
        const tmp = {};
        snap.forEach(d => { tmp[d.id] = d.data() || {}; });
        sectionsCache = tmp;
      } catch (err) {
        console.warn("[content] bet√∂lt√©s hiba:", err);
        sectionsCache = {};
      }
    }

    function applyContentSectionsToDom() {
      document.querySelectorAll("[data-section][data-field]").forEach(el => {
        const section = el.dataset.section;
        const field   = el.dataset.field;
        if (!section || !field) return;
        const sec = sectionsCache[section];
        const val = sec && typeof sec[field] === "string" ? sec[field] : null;
        if (val && val.trim() !== "") {
          // HTML-t enged√ºnk, √≠gy pl. <span class="highlight"> is megmarad
          el.innerHTML = val;
        }
      });
    }

    function initInlineEditing() {
      if (!inlineEditMode || !firebaseEnabled || !db) return;

      const style = document.createElement("style");
      style.textContent = `
        [data-section][data-field].inline-editable {
          outline: 1px dashed transparent;
          cursor: text;
          transition: outline-color .15s ease, background-color .15s ease;
        }
        [data-section][data-field].inline-editable:hover {
          outline-color: #cbd5f5;
        }
        [data-section][data-field].inline-editable:focus {
          outline-color: #3b82f6;
        }
      `;
      document.head.appendChild(style);

      document.querySelectorAll("[data-section][data-field]").forEach(el => {
        el.classList.add("inline-editable");
        el.setAttribute("contenteditable", "true");

        el.addEventListener("focus", () => {
          el.dataset._orig = el.innerHTML;
        });

        el.addEventListener("blur", async () => {
          const section = el.dataset.section;
          const field   = el.dataset.field;
          const value   = (el.innerHTML || "").trim();
          if (!section || !field) return;

          if (!sectionsCache[section]) sectionsCache[section] = {};
          sectionsCache[section][field] = value;
          sectionsCache[section].updatedAt = Date.now();

          try {
            await setDoc(doc(fs, "contentSections", section), sectionsCache[section]);
            el.style.outlineColor = "#16a34a";
            setTimeout(() => { el.style.outlineColor = ""; }, 800);
          } catch (err) {
            console.warn("[content] ment√©s hiba:", err);
            if (el.dataset._orig != null) {
              el.innerHTML = el.dataset._orig;
            }
          }
        });
      });
    }

    async function initContentInline() {
      if (!firebaseEnabled || !db) return;
      await loadContentSections();
      applyContentSectionsToDom();
      applyHeroImageFromContent(); 
      initInlineEditing();
      setupHeroImageAdminEdit();
    }

            /* ------------ Referencia k√©p modal (csak desktopon) ------------ */
    const referenceModalBackdrop = document.getElementById("reference-modal");
    const referenceModalImage    = document.getElementById("reference-modal-image");
    const referenceModalCloseBtn = document.getElementById("reference-modal-close");
    const referenceModalPrevBtn  = document.getElementById("reference-modal-prev");
    const referenceModalNextBtn  = document.getElementById("reference-modal-next");
    const referenceModalTitleEl  = document.getElementById("reference-modal-title");
    const referenceModalCountEl  = document.getElementById("reference-modal-counter");

    function isDesktop() {
      return window.matchMedia("(min-width: 801px)").matches;
    }

    // A modalban lapozhat√≥ referencia-gal√©ria (csak k√©ppel rendelkez≈ë elemek)
    let referenceGallery = [];
    let referenceGalleryIndex = 0;

    function isReferenceModalOpen() {
      return !!referenceModalBackdrop && referenceModalBackdrop.classList.contains("open");
    }

    function mod(n, m) {
      return ((n % m) + m) % m;
    }

    function setReferenceGallery(items) {
      referenceGallery = (Array.isArray(items) ? items : []).filter(it => it && it.imageUrl);
      referenceGalleryIndex = 0;
    }

    function updateReferenceModal() {
      if (!referenceModalImage) return;
      if (!referenceGallery.length) return;

      const item = referenceGallery[referenceGalleryIndex];

      referenceModalImage.src = item.imageUrl || "";
      referenceModalImage.alt = item.title || "Referencia fot√≥";

      if (referenceModalTitleEl) {
        referenceModalTitleEl.textContent = item.title || "";
      }
      if (referenceModalCountEl) {
        referenceModalCountEl.textContent = `${referenceGalleryIndex + 1}/${referenceGallery.length}`;
      }

      const canNav = referenceGallery.length > 1;
      if (referenceModalPrevBtn) referenceModalPrevBtn.style.display = canNav ? "" : "none";
      if (referenceModalNextBtn) referenceModalNextBtn.style.display = canNav ? "" : "none";
    }

    function openReferenceModalAt(index) {
      if (!isDesktop()) return; // csak asztali n√©zetben
      if (!referenceModalBackdrop || !referenceModalImage) return;
      if (!referenceGallery.length) return;

      referenceGalleryIndex = mod(Number(index) || 0, referenceGallery.length);
      referenceModalBackdrop.classList.add("open");
      referenceModalBackdrop.setAttribute("aria-hidden", "false");
      updateReferenceModal();
    }

    function stepReference(delta) {
      if (!referenceGallery.length) return;
      referenceGalleryIndex = mod(referenceGalleryIndex + delta, referenceGallery.length);
      updateReferenceModal();
    }

    function closeReferenceModal() {
      if (!referenceModalBackdrop || !referenceModalImage) return;
      referenceModalBackdrop.classList.remove("open");
      referenceModalBackdrop.setAttribute("aria-hidden", "true");
      referenceModalImage.src = "";
      if (referenceModalTitleEl) referenceModalTitleEl.textContent = "";
      if (referenceModalCountEl) referenceModalCountEl.textContent = "";
    }

    if (referenceModalBackdrop) {
      // h√°tt√©rre kattint√°s = bez√°r√°s
      referenceModalBackdrop.addEventListener("click", (e) => {
        if (e.target === referenceModalBackdrop) {
          closeReferenceModal();
        }
      });
    }

    if (referenceModalCloseBtn) {
      referenceModalCloseBtn.addEventListener("click", () => {
        closeReferenceModal();
      });
    }

    if (referenceModalPrevBtn) {
      referenceModalPrevBtn.addEventListener("click", (e) => {
        e.preventDefault();
        stepReference(-1);
      });
    }

    if (referenceModalNextBtn) {
      referenceModalNextBtn.addEventListener("click", (e) => {
        e.preventDefault();
        stepReference(+1);
      });
    }

    // Billenty≈±k: ESC = z√°r√°s, nyilak = lapoz√°s (csak ha a modal nyitva van)
    document.addEventListener("keydown", (e) => {
      if (!isReferenceModalOpen()) return;

      if (e.key === "Escape") {
        closeReferenceModal();
      } else if (e.key === "ArrowLeft") {
        e.preventDefault();
        stepReference(-1);
      } else if (e.key === "ArrowRight") {
        e.preventDefault();
        stepReference(+1);
      }
    });

/* ------------ REFERENCI√ÅK ‚Äì Realtime Database-b≈ël ------------ */

    const demoItems = [
      {
        title: "Ipari szekcion√°lt kapu",
        description: "Ipari kaputechnika kivitelez√©s Sz√©kesfeh√©rv√°ron.",
        imageUrl: "https://images.pexels.com/photos/4484076/pexels-photo-4484076.jpeg?auto=compress&cs=tinysrgb&w=1200"
      },
      {
        title: "Csal√°di h√°z gar√°zskapu",
        description: "Szigetelt, motoros gar√°zskapu be√©p√≠t√©s.",
        imageUrl: "https://images.pexels.com/photos/4491919/pexels-photo-4491919.jpeg?auto=compress&cs=tinysrgb&w=1200"
      },
      {
        title: "Soromp√≥ rendszer",
        description: "Bel√©ptet≈ë soromp√≥ parkol√≥hoz.",
        imageUrl: "https://images.pexels.com/photos/9799766/pexels-photo-9799766.jpeg?auto=compress&cs=tinysrgb&w=1200"
      }
    ];

    const demoSuppliers = [
      { name: "H√∂rmann Hung√°ria Kft." },
      { name: "Automata Bej√°ratok Specialist√°ja Kft." },
      { name: "Roll-N Kft." },
      { name: "Overgate Kft." },
      { name: "Overgate Kft." },
      { name: "Motors For Gate Kft." },
      { name: "Kapuker Kft." },
      { name: "Gal-La Bt." }
    ];


    function renderReferences(items) {
      if (!gridEl) return;

      gridEl.innerHTML = "";

      if (!items || !items.length) {
        if (emptyEl) emptyEl.style.display = "block";
        // modal lapoz√≥lista is √ºr√ºl
        if (typeof setReferenceGallery === "function") setReferenceGallery([]);
        return;
      }
      if (emptyEl) emptyEl.style.display = "none";

      // A modalhoz: csak a k√©ppel rendelkez≈ë referenci√°k list√°ja, ugyanabban a sorrendben
      const gallery = [];

      items.forEach(item => {
        const card = document.createElement("article");
        card.className = "reference-card";

        const imgWrap = document.createElement("div");
        imgWrap.className = "reference-image-wrap";

        if (item.imageUrl) {
          const img = document.createElement("img");
          img.src = item.imageUrl;
          img.alt = item.title || "Referencia";
          img.loading = "lazy";

          // felvessz√ºk a gal√©ri√°ba, √©s eltessz√ºk az index√©t a lapoz√°shoz
          const galleryIndex = gallery.length;
          gallery.push(item);

          // Kattint√°sra nagy k√©p modal ‚Äì csak desktopon nyit ki
          img.addEventListener("click", () => {
            openReferenceModalAt(galleryIndex);
          });

          imgWrap.appendChild(img);
        }

        const info = document.createElement("div");
        info.className = "reference-info";

        const titleEl = document.createElement("div");
        titleEl.className = "reference-title";
        titleEl.textContent = item.title || "Referencia";

        const descEl = document.createElement("div");
        descEl.className = "reference-desc";
        descEl.textContent = item.description || "";

        info.appendChild(titleEl);
        info.appendChild(descEl);

        card.appendChild(imgWrap);
        card.appendChild(info);
        gridEl.appendChild(card);
      });

      // friss√≠tj√ºk a modal lapozhat√≥ list√°j√°t
      if (typeof setReferenceGallery === "function") setReferenceGallery(gallery);
    }

    async function loadReferences() {
      if (!gridEl) return;

      if (!firebaseEnabled || !fs) {
        renderReferences(demoItems);
        return;
      }

      try {
        const snap = await getDocs(collection(fs, "references"));
        if (snap.empty) {
          renderReferences(demoItems);
          return;
        }

        const items = snap.docs
          .map((docSnap) => ({ id: docSnap.id, ...(docSnap.data() || {}) }))
          .map((d) => ({
            title: d.title || "",
            description: d.description || "",
            imageUrl: d.imageUrl || d.imageDataUrl || "",
            createdAt: d.createdAt || 0
          }))
          .sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0))
          .slice(0, 8);

        renderReferences(items);
      } catch (err) {
        console.warn("[references] Realtime DB hiba ‚Äì demo lista:", err);
        renderReferences(demoItems);
      }
    }

    loadReferences();
    loadHeroSlider();

        function renderSuppliers(items) {
      if (!suppliersGrid) return;

      if (!items || !items.length) {
        suppliersGrid.innerHTML = "";
        if (suppliersEmpty) suppliersEmpty.style.display = "block";
        return;
      }

      if (suppliersEmpty) suppliersEmpty.style.display = "none";

      suppliersGrid.innerHTML = items.map((item) => {
        const name = item.name || "";
        const subtitle = item.subtitle || "";
        const imgSrc = item.imageUrl || item.imageDataUrl || "";
        const first = name.trim().charAt(0).toUpperCase() || "M";

        const logoHtml = imgSrc
          ? `<img src="${imgSrc}" alt="${name || "Besz√°ll√≠t√≥"} log√≥ja" loading="lazy" />`
          : `<div class="partner-logo-placeholder">${first}</div>`;

        return `
          <div class="partner-card">
            <div class="partner-logo">
              ${logoHtml}
            </div>
            <div class="partner-name">${name}</div>
            ${subtitle ? `<div class="partner-subtitle">${subtitle}</div>` : ""}
          </div>
        `;
      }).join("");
    }

    async function loadSuppliers() {
      if (!suppliersGrid) return;

      // Ha nincs Firebase (demo m√≥d), akkor csak a neveket mutatjuk
      if (!firebaseEnabled || !fs) {
        renderSuppliers(demoSuppliers);
        return;
      }

      try {
        const snap = await getDocs(collection(fs, "suppliers"));
        if (snap.empty) {
          renderSuppliers(demoSuppliers);
          return;
        }

        const items = snap.docs
          .map((docSnap) => ({ id: docSnap.id, ...(docSnap.data() || {}) }))
          .map((d) => ({
            id: d.id,
            name: d.name || "",
            subtitle: d.subtitle || "",
            imageUrl: d.imageUrl || d.imageDataUrl || "",
            orderIndex: typeof d.orderIndex === "number" ? d.orderIndex : 0,
            createdAt: d.createdAt || 0
          }))
          .sort((a, b) => {
            if (a.orderIndex !== b.orderIndex) return a.orderIndex - b.orderIndex;
            return (b.createdAt || 0) - (a.createdAt || 0);
          });

        renderSuppliers(items);
      } catch (err) {
        console.warn("[suppliers] Realtime DB hiba ‚Äì demo lista:", err);
        renderSuppliers(demoSuppliers);
      }
    }

    /* ------------ TERM√âKV√ÅLASZT√âK ‚Äì term√©kek list√°z√°sa ------------ */

    const termekGrid = document.getElementById("termekvalasztek-grid");
    const termekEmpty = document.getElementById("termekvalasztek-empty");

    function renderProducts(items) {
      if (!termekGrid) return;

      termekGrid.innerHTML = "";

      if (!items || !items.length) {
        if (termekEmpty) termekEmpty.style.display = "block";
        return;
      }

      if (termekEmpty) termekEmpty.style.display = "none";

      items.forEach((item) => {
        const card = document.createElement("article");
        card.className = "product-grid-card";

        const goToDetails = () => {
          if (!item.id) return;
          window.location.href = `details.html?id=${encodeURIComponent(item.id)}`;
        };

        card.addEventListener("click", goToDetails);

        if (item.imageUrl) {
          const imgWrap = document.createElement("div");
          imgWrap.className = "product-grid-card-image";

          const img = document.createElement("img");
          img.src = item.imageUrl;
          img.alt = item.name || "Term√©k fot√≥ja";
          img.loading = "lazy";

          imgWrap.appendChild(img);
          card.appendChild(imgWrap);
        }

        const titleEl = document.createElement("h3");
        titleEl.className = "product-grid-card-title";
        titleEl.textContent = item.name || "Term√©k";
        card.appendChild(titleEl);

        if (item.shortDescription) {
          const shortEl = document.createElement("p");
          shortEl.className = "product-grid-card-desc";
          shortEl.textContent = item.shortDescription;
          card.appendChild(shortEl);
        }

        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "btn-primary";
        btn.textContent = "R√©szletek";
        btn.addEventListener("click", (ev) => {
          ev.stopPropagation();
          goToDetails();
        });
        card.appendChild(btn);

        termekGrid.appendChild(card);
      });
    }

    async function loadProducts() {
      if (!termekGrid) return;

      // Ha nincs Firebase (demo m√≥d), csak √ºres lista
      if (!firebaseEnabled || !fs) {
        renderProducts([]);
        return;
      }

      try {
        const snap = await getDocs(collection(fs, "products"));
        if (snap.empty) {
          renderProducts([]);
          return;
        }

        const items = snap.docs
          .map((docSnap) => ({ id: docSnap.id, ...(docSnap.data() || {}) }))
          .map((d) => ({
            id: d.id,
            name: d.name || "",
            shortDescription: d.shortDescription || d.tagline || "",
            longDescription: d.longDescription || d.description || "",
            imageUrl: d.imageUrl || d.imageDataUrl || "",
            createdAt: d.createdAt || 0
          }))
          .sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));

        renderProducts(items);
      } catch (err) {
        console.warn("[products] Realtime DB hiba:", err);
        renderProducts([]);
      }
    }


    loadSuppliers();
    loadProducts();
    loadServices();
    loadWhyUs();

    /* ------------ ANALITIKA ‚Äì ugyanaz a logika, mint eddig ------------ */

    const analyticsEnabled = firebaseEnabled && !!db;

    if (analyticsEnabled) {
      const VISITOR_KEY       = "mesztor_visitor_id";
      const SESSION_KEY       = "mesztor_session_id";
      const SESSION_START_KEY = "mesztor_session_start";
      const PAGEVIEWS_KEY     = "mesztor_session_pageviews";

      function uuid() {
        if (crypto.randomUUID) return crypto.randomUUID();
        return Date.now().toString(36) + Math.random().toString(36).slice(2);
      }

      let visitorId = localStorage.getItem(VISITOR_KEY);
      if (!visitorId) {
        visitorId = uuid();
        localStorage.setItem(VISITOR_KEY, visitorId);
      }

      const now = Date.now();
      let sessionId    = sessionStorage.getItem(SESSION_KEY);
      let sessionStart = Number(sessionStorage.getItem(SESSION_START_KEY) || 0);

      if (!sessionId || !sessionStart || (now - sessionStart) > 30 * 60 * 1000) {
        sessionId    = uuid();
        sessionStart = now;
        sessionStorage.setItem(SESSION_KEY, sessionId);
        sessionStorage.setItem(SESSION_START_KEY, String(sessionStart));
        sessionStorage.setItem(PAGEVIEWS_KEY, "0");
      }

      let pageViews = Number(sessionStorage.getItem(PAGEVIEWS_KEY) || "0") + 1;
      sessionStorage.setItem(PAGEVIEWS_KEY, String(pageViews));

      const sessionRef = ref(db, `analytics/sessions/${sessionId}`);
      const pagePath   = location.pathname || "/";

      function sendSnapshot() {
        const t = Date.now();
        const durationSec = Math.floor((t - sessionStart) / 1000);
        const payload = {
          visitorId,
          sessionId,
          startedAt: sessionStart,
          lastUpdatedAt: t,
          durationSec,
          pageViews,
          lastPage: pagePath,
          userAgent: navigator.userAgent || ""
        };
        return update(sessionRef, payload).catch(err => {
          console.warn("[analytics] update hiba:", err);
        });
      }

      // els≈ë √≠r√°s
      set(sessionRef, {
        visitorId,
        sessionId,
        startedAt: sessionStart,
        lastUpdatedAt: now,
        durationSec: 0,
        pageViews,
        firstPage: pagePath,
        userAgent: navigator.userAgent || ""
      }).catch(err => console.warn("[analytics] set hiba:", err));

      sendSnapshot();
      const intId = setInterval(sendSnapshot, 15000);

      window.addEventListener("beforeunload", () => {
        sendSnapshot();
        clearInterval(intId);
      });
    }
  </script>

  <script>
    const navToggle = document.querySelector(".nav-toggle");
    const navLinks  = document.querySelector(".nav-links");

    if (navToggle && navLinks) {
      navToggle.addEventListener("click", () => {
        navLinks.classList.toggle("open");
      });

      navLinks.addEventListener("click", (e) => {
        const t = e.target;
        if (!(t instanceof HTMLElement)) return;

        const clickable = t.closest("a,button");
        if (!clickable) return;

        navLinks.classList.remove("open");
      });
    }
  </script>

  <script>
document.addEventListener("DOMContentLoaded", () => {
  // --- EmailJS azonos√≠t√≥k (IDE √çRD BE A SAJ√ÅTJAID) ---
  const EMAILJS_PUBLIC_KEY  = "tTB4VQzyRgCLmFqu_";
  const EMAILJS_SERVICE_ID  = "service_kmotyjg";
  const EMAILJS_TEMPLATE_ID = "template_yuao2x9";

  // --- Form elemek megfog√°sa ---
  const formWrap = document.querySelector(".form-container");
  if (!formWrap) return;

  const nameEl  = formWrap.querySelector('input[placeholder="N√©v"]') || formWrap.querySelector("#name");
  const mailEl  = formWrap.querySelector("#mail") || formWrap.querySelector('input[type="email"]');
  const msgEl   = formWrap.querySelector("#message") || formWrap.querySelector("textarea");
  const sendBtn = formWrap.querySelector(".send-button");
  const resetBtn = formWrap.querySelector("#reset-btn");

  // Ha a "K√ºld√©s" div, legyen keyboard-bar√°t is
  if (sendBtn) {
    sendBtn.setAttribute("role", "button");
    sendBtn.tabIndex = 0;
  }

  // St√°tusz sor
  let statusEl = formWrap.querySelector(".form-status");
  if (!statusEl) {
    statusEl = document.createElement("div");
    statusEl.className = "form-status";
    statusEl.style.cssText = "margin-top:10px;font-size:14px;";
    formWrap.appendChild(statusEl);
  }

  // Honeypot (alap spam ellen)
  const hp = document.createElement("input");
  hp.type = "text";
  hp.name = "company";
  hp.autocomplete = "off";
  hp.tabIndex = -1;
  hp.style.cssText = "position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;";
  formWrap.appendChild(hp);

  const setStatus = (txt, kind = "info") => {
    statusEl.textContent = txt || "";
    statusEl.style.color =
      kind === "ok"  ? "#16a34a" :
      kind === "err" ? "#dc2626" : "#475569";
  };

  const disableSend = (disabled) => {
    if (!sendBtn) return;
    sendBtn.style.pointerEvents = disabled ? "none" : "auto";
    sendBtn.style.opacity = disabled ? "0.6" : "1";
  };

  const isValidEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);

  async function emailjsSend(templateParams) {
    // EmailJS REST API (nincs k√ºls≈ë lib)
    const payload = {
      service_id: EMAILJS_SERVICE_ID,
      template_id: EMAILJS_TEMPLATE_ID,
      user_id: EMAILJS_PUBLIC_KEY,
      template_params: templateParams
    };

    const res = await fetch("https://api.emailjs.com/api/v1.0/email/send", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    if (!res.ok) {
      throw new Error("EmailJS HTTP " + res.status);
    }
  }

  async function handleSend() {
    // bot check
    if (hp.value && hp.value.trim()) return;

    const from_name = (nameEl?.value || "").trim();
    const reply_to  = (mailEl?.value || "").trim();
    const message   = (msgEl?.value || "").trim();

    if (!from_name || !reply_to || !message) {
      setStatus("K√©rlek t√∂ltsd ki a N√©v, Email √©s √úzenet mez≈ëket.", "err");
      return;
    }
    if (!isValidEmail(reply_to)) {
      setStatus("K√©rlek √©rv√©nyes email c√≠met adj meg.", "err");
      return;
    }

    // egyszer≈± throttle (1 √ºzenet / 60 mp / b√∂ng√©sz≈ë)
    const key = "contact_last_send_ts";
    const last = Number(localStorage.getItem(key) || 0);
    if (Date.now() - last < 60_000) {
      setStatus("K√©rlek v√°rj egy percet k√©t √ºzenet k√∂z√∂tt.", "err");
      return;
    }

    if (!EMAILJS_PUBLIC_KEY || !EMAILJS_SERVICE_ID || !EMAILJS_TEMPLATE_ID) {
      setStatus("Hi√°nyzik az EmailJS PUBLIC_KEY / SERVICE_ID / TEMPLATE_ID a k√≥db√≥l.", "err");
      return;
    }

    disableSend(true);
    setStatus("K√ºld√©s folyamatban‚Ä¶");

    try {
      await emailjsSend({
        from_name,
        reply_to,
        message,
        page_url: location.href,
        sent_at: new Date().toISOString()
      });

      localStorage.setItem(key, String(Date.now()));
      setStatus("Elk√ºldve ‚úÖ K√∂sz√∂nj√ºk! Hamarosan jelentkez√ºnk.", "ok");

      if (nameEl) nameEl.value = "";
      if (mailEl) mailEl.value = "";
      if (msgEl) msgEl.value = "";
    } catch (e) {
      console.warn("[contactForm] k√ºld√©s hiba:", e);
      setStatus("Sikertelen k√ºld√©s. Pr√≥b√°ld √∫jra, vagy √≠rj e-mailt k√∂zvetlen√ºl.", "err");
    } finally {
      disableSend(false);
    }
  }

  // kattint√°s + billenty≈±
  sendBtn?.addEventListener("click", (e) => { e.preventDefault(); handleSend(); });
  sendBtn?.addEventListener("keydown", (e) => {
    if (e.key === "Enter" || e.key === " ") { e.preventDefault(); handleSend(); }
  });

  resetBtn?.addEventListener("click", (e) => {
    e.preventDefault();
    if (nameEl) nameEl.value = "";
    if (mailEl) mailEl.value = "";
    if (msgEl) msgEl.value = "";
    setStatus("");
  });
});
</script>


  <!-- Referencia k√©p nagy n√©zet (csak desktopon) -->
  <div id="reference-modal" class="reference-modal-backdrop" aria-hidden="true">
    <div class="reference-modal" role="dialog" aria-modal="true" aria-label="Referencia fot√≥">
      <button
        type="button"
        id="reference-modal-close"
        class="reference-modal-close"
        aria-label="Bez√°r√°s"
      >
        √ó
      </button>

      <button
        type="button"
        id="reference-modal-prev"
        class="reference-modal-nav reference-modal-prev"
        aria-label="El≈ëz≈ë referencia"
        title="El≈ëz≈ë (‚Üê)"
      >
        ‚Äπ
      </button>

      <button
        type="button"
        id="reference-modal-next"
        class="reference-modal-nav reference-modal-next"
        aria-label="K√∂vetkez≈ë referencia"
        title="K√∂vetkez≈ë (‚Üí)"
      >
        ‚Ä∫
      </button>

      <div class="reference-modal-meta" aria-live="polite">
        <div id="reference-modal-title" class="reference-modal-title"></div>
        <div id="reference-modal-counter" class="reference-modal-counter"></div>
      </div>

      <img id="reference-modal-image" src="" alt="Referencia nagyban" />
    </div>
  </div>

</body>
</html>
